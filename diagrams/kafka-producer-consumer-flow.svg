<svg xmlns="http://www.w3.org/2000/svg" width="1800" height="1400" viewBox="0 0 1800 1400">
  <defs>
    <linearGradient id="producerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2980b9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="kafkaGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#f39c12;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#e67e22;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="consumerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#9b59b6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8e44ad;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="taskGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#27ae60;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#229954;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="notifGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#e74c3c;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c0392b;stop-opacity:1" />
    </linearGradient>
    
    <!-- Arrow markers -->
    <marker id="arrowBlue" markerWidth="12" markerHeight="12" refX="11" refY="6" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,12 L11,6 z" fill="#3498db" />
    </marker>
    <marker id="arrowOrange" markerWidth="12" markerHeight="12" refX="11" refY="6" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,12 L11,6 z" fill="#f39c12" />
    </marker>
    <marker id="arrowPurple" markerWidth="12" markerHeight="12" refX="11" refY="6" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,12 L11,6 z" fill="#9b59b6" />
    </marker>
    <marker id="arrowGreen" markerWidth="12" markerHeight="12" refX="11" refY="6" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,12 L11,6 z" fill="#27ae60" />
    </marker>
    <marker id="arrowRed" markerWidth="12" markerHeight="12" refX="11" refY="6" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,12 L11,6 z" fill="#e74c3c" />
    </marker>
    
    <!-- Event shape pattern -->
    <pattern id="eventPattern" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">
      <circle cx="10" cy="10" r="1" fill="#ffffff" opacity="0.3"/>
    </pattern>
  </defs>
  
  <!-- Title -->
  <rect x="0" y="0" width="1800" height="80" fill="#2c3e50"/>
  <text x="900" y="45" font-size="36" font-weight="bold" text-anchor="middle" fill="white" font-family="Arial, sans-serif">
    Kafka Producer-Consumer Architecture: Events, Tasks &amp; Notifications
  </text>
  
  <!-- SECTION 1: PRODUCER -->
  <rect x="50" y="120" width="450" height="280" fill="url(#producerGrad)" rx="15" opacity="0.95" stroke="#2980b9" stroke-width="3"/>
  <text x="275" y="155" font-size="24" font-weight="bold" text-anchor="middle" fill="white" font-family="Arial, sans-serif">
    üöÄ PRODUCER
  </text>
  <text x="275" y="180" font-size="16" text-anchor="middle" fill="#ecf0f1" font-family="Arial, sans-serif">
    Spring Boot Backend Service
  </text>
  
  <!-- Producer Components -->
  <rect x="70" y="200" width="410" height="50" fill="white" rx="8" opacity="0.9"/>
  <text x="285" y="225" font-size="15" font-weight="bold" text-anchor="middle" fill="#2c3e50" font-family="Arial, sans-serif">
    CaseService / TimesheetService
  </text>
  <text x="285" y="243" font-size="12" text-anchor="middle" fill="#7f8c8d" font-family="Arial, sans-serif">
    Business Logic Layer
  </text>
  
  <rect x="70" y="260" width="410" height="50" fill="white" rx="8" opacity="0.9"/>
  <text x="285" y="285" font-size="15" font-weight="bold" text-anchor="middle" fill="#2c3e50" font-family="Arial, sans-serif">
    KafkaTemplate
  </text>
  <text x="285" y="303" font-size="12" text-anchor="middle" fill="#7f8c8d" font-family="Arial, sans-serif">
    Publishes events to Kafka topics
  </text>
  
  <rect x="70" y="320" width="410" height="60" fill="#e8f5e9" rx="8" stroke="#27ae60" stroke-width="2"/>
  <text x="285" y="345" font-size="13" font-weight="bold" text-anchor="middle" fill="#155724" font-family="Arial, sans-serif">
    ‚ö° Non-Blocking Operation
  </text>
  <text x="285" y="365" font-size="11" text-anchor="middle" fill="#155724" font-family="Arial, sans-serif">
    Returns immediately (~0.1s), doesn&amp;#39;t wait for processing
  </text>
  
  <!-- Trigger Events -->
  <rect x="50" y="420" width="450" height="180" fill="#ecf0f1" rx="10" stroke="#bdc3c7" stroke-width="2"/>
  <text x="275" y="450" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c3e50" font-family="Arial, sans-serif">
    üì• Event Triggers
  </text>
  
  <rect x="70" y="470" width="200" height="35" fill="#fff3cd" rx="5" stroke="#ffc107" stroke-width="1"/>
  <text x="170" y="488" font-size="13" text-anchor="middle" fill="#856404" font-family="Arial, sans-serif" font-weight="bold">
    Case Created
  </text>
  <text x="170" y="502" font-size="11" text-anchor="middle" fill="#856404" font-family="Arial, sans-serif">
    New case assigned
  </text>
  
  <rect x="280" y="470" width="200" height="35" fill="#fff3cd" rx="5" stroke="#ffc107" stroke-width="1"/>
  <text x="380" y="488" font-size="13" text-anchor="middle" fill="#856404" font-family="Arial, sans-serif" font-weight="bold">
    Address Changed
  </text>
  <text x="380" y="502" font-size="11" text-anchor="middle" fill="#856404" font-family="Arial, sans-serif">
    Recipient relocated
  </text>
  
  <rect x="70" y="520" width="200" height="35" fill="#d1ecf1" rx="5" stroke="#17a2b8" stroke-width="1"/>
  <text x="170" y="538" font-size="13" text-anchor="middle" fill="#0c5460" font-family="Arial, sans-serif" font-weight="bold">
    Timesheet Exception
  </text>
  <text x="170" y="552" font-size="11" text-anchor="middle" fill="#0c5460" font-family="Arial, sans-serif">
    Validation failed
  </text>
  
  <rect x="280" y="520" width="200" height="35" fill="#d1ecf1" rx="5" stroke="#17a2b8" stroke-width="1"/>
  <text x="380" y="538" font-size="13" text-anchor="middle" fill="#0c5460" font-family="Arial, sans-serif" font-weight="bold">
    Overtime Violation
  </text>
  <text x="380" y="552" font-size="11" text-anchor="middle" fill="#0c5460" font-family="Arial, sans-serif">
    Hours exceed limit
  </text>
  
  <rect x="70" y="570" width="410" height="20" fill="#d4edda" rx="5"/>
  <text x="275" y="584" font-size="11" text-anchor="middle" fill="#155724" font-family="Arial, sans-serif">
    These events are published to Kafka asynchronously
  </text>
  
  <!-- Arrow from Producer to Kafka -->
  <path d="M 500 390 L 650 390" stroke="#f39c12" stroke-width="6" fill="none" marker-end="url(#arrowOrange)"/>
  <text x="575" y="385" font-size="14" text-anchor="middle" fill="#f39c12" font-family="Arial, sans-serif" font-weight="bold">
    publish
  </text>
  
  <!-- SECTION 2: KAFKA TOPICS -->
  <rect x="650" y="120" width="500" height="480" fill="url(#kafkaGrad)" rx="15" opacity="0.95" stroke="#e67e22" stroke-width="3"/>
  <text x="900" y="155" font-size="24" font-weight="bold" text-anchor="middle" fill="white" font-family="Arial, sans-serif">
    üì¨ KAFKA MESSAGE BROKER
  </text>
  
  <!-- Topic 1: Case Events -->
  <rect x="680" y="190" width="440" height="200" fill="white" rx="10" opacity="0.95" stroke="#f39c12" stroke-width="2"/>
  <text x="900" y="220" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c3e50" font-family="Arial, sans-serif">
    Topic: cmips-case-events
  </text>
  
  <rect x="700" y="240" width="400" height="30" fill="#fff3cd" rx="5"/>
  <text x="900" y="259" font-size="12" text-anchor="middle" fill="#856404" font-family="Arial, sans-serif" font-weight="bold">
    Event: case.created
  </text>
  <text x="700" y="259" font-size="10" text-anchor="start" fill="#856404" font-family="Courier, monospace">
    {"eventType":"case.created","payload":{...}}
  </text>
  
  <rect x="700" y="275" width="400" height="30" fill="#fff3cd" rx="5"/>
  <text x="900" y="294" font-size="12" text-anchor="middle" fill="#856404" font-family="Arial, sans-serif" font-weight="bold">
    Event: case.address.changed
  </text>
  <text x="700" y="294" font-size="10" text-anchor="start" fill="#856404" font-family="Courier, monospace">
    {"eventType":"case.address.changed","payload":{...}}
  </text>
  
  <rect x="700" y="310" width="400" height="30" fill="#ffe4b5" rx="5"/>
  <text x="900" y="329" font-size="11" text-anchor="middle" fill="#856404" font-family="Arial, sans-serif">
    üíæ Partitioned &amp; Replicated for High Availability
  </text>
  
  <rect x="700" y="345" width="400" height="35" fill="#d4edda" rx="5"/>
  <text x="900" y="365" font-size="12" text-anchor="middle" fill="#155724" font-family="Arial, sans-serif" font-weight="bold">
    Consumer Group: task-consumer-group
  </text>
  <text x="900" y="380" font-size="11" text-anchor="middle" fill="#155724" font-family="Arial, sans-serif">
    3 partitions for load balancing
  </text>
  
  <!-- Topic 2: Timesheet Events -->
  <rect x="680" y="410" width="440" height="170" fill="white" rx="10" opacity="0.95" stroke="#17a2b8" stroke-width="2"/>
  <text x="900" y="440" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c3e50" font-family="Arial, sans-serif">
    Topic: cmips-timesheet-events
  </text>
  
  <rect x="700" y="460" width="400" height="30" fill="#d1ecf1" rx="5"/>
  <text x="900" y="479" font-size="12" text-anchor="middle" fill="#0c5460" font-family="Arial, sans-serif" font-weight="bold">
    Event: timesheet.exception.detected
  </text>
  
  <rect x="700" y="495" width="400" height="30" fill="#d1ecf1" rx="5"/>
  <text x="900" y="514" font-size="12" text-anchor="middle" fill="#0c5460" font-family="Arial, sans-serif" font-weight="bold">
    Event: timesheet.overtime.violation
  </text>
  
  <rect x="700" y="530" width="400" height="40" fill="#d4edda" rx="5"/>
  <text x="900" y="550" font-size="11" text-anchor="middle" fill="#155724" font-family="Arial, sans-serif">
    ‚úÖ Events persist in Kafka until consumed
  </text>
  <text x="900" y="565" font-size="11" text-anchor="middle" fill="#155724" font-family="Arial, sans-serif">
    ‚úÖ Supports replay if consumer fails
  </text>
  
  <!-- Arrow from Kafka to Consumer -->
  <path d="M 1150 390 L 1300 390" stroke="#9b59b6" stroke-width="6" fill="none" marker-end="url(#arrowPurple)"/>
  <text x="1225" y="385" font-size="14" text-anchor="middle" fill="#9b59b6" font-family="Arial, sans-serif" font-weight="bold">
    consume
  </text>
  
  <!-- SECTION 3: CONSUMER -->
  <rect x="1300" y="120" width="450" height="280" fill="url(#consumerGrad)" rx="15" opacity="0.95" stroke="#8e44ad" stroke-width="3"/>
  <text x="1525" y="155" font-size="24" font-weight="bold" text-anchor="middle" fill="white" font-family="Arial, sans-serif">
    üîÑ CONSUMER
  </text>
  <text x="1525" y="180" font-size="16" text-anchor="middle" fill="#ecf0f1" font-family="Arial, sans-serif">
    TaskEventConsumer Service
  </text>
  
  <!-- Consumer Components -->
  <rect x="1320" y="200" width="410" height="50" fill="white" rx="8" opacity="0.9"/>
  <text x="1525" y="225" font-size="15" font-weight="bold" text-anchor="middle" fill="#2c3e50" font-family="Arial, sans-serif">
    @KafkaListener
  </text>
  <text x="1525" y="243" font-size="12" text-anchor="middle" fill="#7f8c8d" font-family="Arial, sans-serif">
    Listens to both topics automatically
  </text>
  
  <rect x="1320" y="260" width="410" height="50" fill="white" rx="8" opacity="0.9"/>
  <text x="1525" y="285" font-size="15" font-weight="bold" text-anchor="middle" fill="#2c3e50" font-family="Arial, sans-serif">
    Event Processing Logic
  </text>
  <text x="1525" y="303" font-size="12" text-anchor="middle" fill="#7f8c8d" font-family="Arial, sans-serif">
    Routes events by type to handlers
  </text>
  
  <rect x="1320" y="320" width="410" height="60" fill="#fff3cd" rx="8" stroke="#f39c12" stroke-width="2"/>
  <text x="1525" y="345" font-size="13" text-anchor="middle" fill="#856404" font-family="Arial, sans-serif" font-weight="bold">
    üîÑ Asynchronous Processing
  </text>
  <text x="1525" y="365" font-size="11" text-anchor="middle" fill="#856404" font-family="Arial, sans-serif">
    Processes events independently, doesn&amp;#39;t block producer
  </text>
  
  <!-- Consumer Event Handlers -->
  <rect x="1300" y="420" width="450" height="180" fill="#f8d7da" rx="10" stroke="#e74c3c" stroke-width="2"/>
  <text x="1525" y="450" font-size="18" font-weight="bold" text-anchor="middle" fill="#721c24" font-family="Arial, sans-serif">
    üîß Event Handlers
  </text>
  
  <rect x="1320" y="470" width="410" height="30" fill="white" rx="5"/>
  <text x="1525" y="490" font-size="13" text-anchor="middle" fill="#2c3e50" font-family="Arial, sans-serif" font-weight="bold">
    handleCaseEvent() ‚Üí createCaseCreatedTask() / createAddressValidationTask()
  </text>
  
  <rect x="1320" y="510" width="410" height="30" fill="white" rx="5"/>
  <text x="1525" y="530" font-size="13" text-anchor="middle" fill="#2c3e50" font-family="Arial, sans-serif" font-weight="bold">
    handleTimesheetEvent() ‚Üí createTimesheetExceptionTask() / createOvertimeViolationTask()
  </text>
  
  <rect x="1320" y="550" width="410" height="35" fill="#d4edda" rx="5"/>
  <text x="1525" y="570" font-size="12" text-anchor="middle" fill="#155724" font-family="Arial, sans-serif" font-weight="bold">
    Each handler calls: TaskService + NotificationService
  </text>
  <text x="1525" y="588" font-size="11" text-anchor="middle" fill="#155724" font-family="Arial, sans-serif">
    Creates Tasks &amp; Notifications based on event type
  </text>
  
  <!-- SECTION 4: TASKS -->
  <rect x="50" y="700" width="550" height="300" fill="url(#taskGrad)" rx="15" opacity="0.95" stroke="#229954" stroke-width="3"/>
  <text x="325" y="735" font-size="24" font-weight="bold" text-anchor="middle" fill="white" font-family="Arial, sans-serif">
    üìã TASKS CREATED
  </text>
  
  <!-- Task Examples -->
  <rect x="80" y="760" width="490" height="80" fill="white" rx="8" opacity="0.95"/>
  <text x="325" y="785" font-size="15" font-weight="bold" text-anchor="middle" fill="#2c3e50" font-family="Arial, sans-serif">
    Case Created Task
  </text>
  <text x="80" y="805" font-size="12" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Title: "New Case Assignment - [Recipient]"
  </text>
  <text x="80" y="825" font-size="12" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Assigned To: Case Owner (from event payload)
  </text>
  <text x="300" y="805" font-size="12" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Priority: HIGH
  </text>
  <text x="300" y="825" font-size="12" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Due Date: +5 days
  </text>
  
  <rect x="80" y="850" width="490" height="80" fill="white" rx="8" opacity="0.95"/>
  <text x="325" y="875" font-size="15" font-weight="bold" text-anchor="middle" fill="#2c3e50" font-family="Arial, sans-serif">
    Timesheet Exception Task
  </text>
  <text x="80" y="900" font-size="12" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Title: "Timesheet Exception - Provider: [ID]"
  </text>
  <text x="80" y="920" font-size="12" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Assigned To: payroll_queue
  </text>
  <text x="300" y="900" font-size="12" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Priority: MEDIUM/HIGH
  </text>
  <text x="300" y="920" font-size="12" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Action Link: /timesheets/[ID]
  </text>
  
  <rect x="80" y="940" width="490" height="50" fill="#d4edda" rx="8" stroke="#27ae60" stroke-width="2"/>
  <text x="325" y="965" font-size="13" text-anchor="middle" fill="#155724" font-family="Arial, sans-serif" font-weight="bold">
    ‚úÖ Tasks saved to PostgreSQL via TaskService
  </text>
  <text x="325" y="982" font-size="11" text-anchor="middle" fill="#155724" font-family="Arial, sans-serif">
    Available in WorkView &amp; Work Queues
  </text>
  
  <!-- SECTION 5: NOTIFICATIONS -->
  <rect x="650" y="700" width="550" height="300" fill="url(#notifGrad)" rx="15" opacity="0.95" stroke="#c0392b" stroke-width="3"/>
  <text x="925" y="735" font-size="24" font-weight="bold" text-anchor="middle" fill="white" font-family="Arial, sans-serif">
    üîî NOTIFICATIONS CREATED
  </text>
  
  <!-- Notification Examples -->
  <rect x="680" y="760" width="490" height="80" fill="white" rx="8" opacity="0.95"/>
  <text x="925" y="785" font-size="15" font-weight="bold" text-anchor="middle" fill="#2c3e50" font-family="Arial, sans-serif">
    Case Assignment Notification
  </text>
  <text x="680" y="805" font-size="12" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ User ID: Case Owner
  </text>
  <text x="680" y="825" font-size="12" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Message: "You have a new case assigned - [Recipient]"
  </text>
  <text x="900" y="805" font-size="12" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Type: INFO
  </text>
  <text x="900" y="825" font-size="12" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Action Link: /cases/[ID]
  </text>
  
  <rect x="680" y="850" width="490" height="80" fill="white" rx="8" opacity="0.95"/>
  <text x="925" y="875" font-size="15" font-weight="bold" text-anchor="middle" fill="#2c3e50" font-family="Arial, sans-serif">
    Timesheet Exception Alert
  </text>
  <text x="680" y="900" font-size="12" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ User ID: supervisor
  </text>
  <text x="680" y="920" font-size="12" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Message: "Timesheet exception detected for provider: [ID]"
  </text>
  <text x="900" y="900" font-size="12" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Type: ALERT
  </text>
  <text x="900" y="920" font-size="12" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Read Status: false (unread)
  </text>
  
  <rect x="680" y="940" width="490" height="50" fill="#d4edda" rx="8" stroke="#27ae60" stroke-width="2"/>
  <text x="925" y="965" font-size="13" text-anchor="middle" fill="#155724" font-family="Arial, sans-serif" font-weight="bold">
    ‚úÖ Notifications saved to PostgreSQL via NotificationService
  </text>
  <text x="925" y="982" font-size="11" text-anchor="middle" fill="#155724" font-family="Arial, sans-serif">
    Displayed in NotificationCenter component
  </text>
  
  <!-- SECTION 6: DATABASE -->
  <rect x="1250" y="700" width="500" height="300" fill="#34495e" rx="15" opacity="0.95" stroke="#2c3e50" stroke-width="3"/>
  <text x="1500" y="735" font-size="24" font-weight="bold" text-anchor="middle" fill="white" font-family="Arial, sans-serif">
    üíæ POSTGRESQL DATABASE
  </text>
  
  <rect x="1280" y="760" width="440" height="80" fill="white" rx="8" opacity="0.9"/>
  <text x="1500" y="785" font-size="16" font-weight="bold" text-anchor="middle" fill="#2c3e50" font-family="Arial, sans-serif">
    tasks table
  </text>
  <text x="1280" y="810" font-size="12" text-anchor="start" fill="#34495e" font-family="Courier, monospace">
    ‚Ä¢ id, title, description, assignedTo
  </text>
  <text x="1280" y="830" font-size="12" text-anchor="start" fill="#34495e" font-family="Courier, monospace">
    ‚Ä¢ status, priority, dueDate, actionLink
  </text>
  
  <rect x="1280" y="850" width="440" height="80" fill="white" rx="8" opacity="0.9"/>
  <text x="1500" y="875" font-size="16" font-weight="bold" text-anchor="middle" fill="#2c3e50" font-family="Arial, sans-serif">
    notifications table
  </text>
  <text x="1280" y="910" font-size="12" text-anchor="start" fill="#34495e" font-family="Courier, monospace">
    ‚Ä¢ id, userId, message, notificationType
  </text>
  <text x="1280" y="930" font-size="12" text-anchor="start" fill="#34495e" font-family="Courier, monospace">
    ‚Ä¢ actionLink, readStatus, createdAt
  </text>
  
  <rect x="1280" y="940" width="440" height="50" fill="#d4edda" rx="8" stroke="#27ae60" stroke-width="2"/>
  <text x="1500" y="965" font-size="12" text-anchor="middle" fill="#155724" font-family="Arial, sans-serif" font-weight="bold">
    ‚úÖ JPA Repository saves via TaskService &amp; NotificationService
  </text>
  <text x="1500" y="982" font-size="11" text-anchor="middle" fill="#155724" font-family="Arial, sans-serif">
    Frontend queries via REST API
  </text>
  
  <!-- Flow Arrows -->
  <!-- Producer to Kafka -->
  <path d="M 500 390 L 650 390" stroke="#f39c12" stroke-width="6" fill="none" marker-end="url(#arrowOrange)"/>
  
  <!-- Kafka to Consumer -->
  <path d="M 1150 390 L 1300 390" stroke="#9b59b6" stroke-width="6" fill="none" marker-end="url(#arrowPurple)"/>
  
  <!-- Consumer to Tasks -->
  <path d="M 1525 400 Q 1525 550 325 700" stroke="#27ae60" stroke-width="5" fill="none" marker-end="url(#arrowGreen)" stroke-dasharray="8,4"/>
  <text x="925" y="545" font-size="13" text-anchor="middle" fill="#27ae60" font-family="Arial, sans-serif" font-weight="bold">
    TaskService.createTask()
  </text>
  
  <!-- Consumer to Notifications -->
  <path d="M 1525 400 Q 1525 550 925 700" stroke="#e74c3c" stroke-width="5" fill="none" marker-end="url(#arrowRed)" stroke-dasharray="8,4"/>
  <text x="1225" y="545" font-size="13" text-anchor="middle" fill="#e74c3c" font-family="Arial, sans-serif" font-weight="bold">
    NotificationService.createNotification()
  </text>
  
  <!-- Tasks to Database -->
  <path d="M 600 850 L 1280 850" stroke="#34495e" stroke-width="4" fill="none" marker-end="url(#arrowBlue)" stroke-dasharray="5,3"/>
  
  <!-- Notifications to Database -->
  <path d="M 1140 850 L 1280 850" stroke="#34495e" stroke-width="4" fill="none" marker-end="url(#arrowBlue)" stroke-dasharray="5,3"/>
  
  <!-- FRONTEND SECTION -->
  <rect x="50" y="1050" width="1700" height="250" fill="#ecf0f1" rx="15" stroke="#95a5a6" stroke-width="3"/>
  <text x="900" y="1085" font-size="24" font-weight="bold" text-anchor="middle" fill="#2c3e50" font-family="Arial, sans-serif">
    üñ•Ô∏è FRONTEND DISPLAY (React)
  </text>
  
  <rect x="100" y="1100" width="500" height="180" fill="white" rx="10" stroke="#3498db" stroke-width="2"/>
  <text x="350" y="1130" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c3e50" font-family="Arial, sans-serif">
    WorkView Component
  </text>
  <text x="120" y="1155" font-size="13" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ GET /api/tasks/user/{userId}
  </text>
  <text x="120" y="1175" font-size="13" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Shows personalized tasks assigned to user
  </text>
  <text x="120" y="1195" font-size="13" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Filters by status, priority, dueDate
  </text>
  <text x="120" y="1215" font-size="13" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Real-time updates via polling/WebSocket
  </text>
  <text x="350" y="1245" font-size="11" text-anchor="middle" fill="#7f8c8d" font-family="Arial, sans-serif">
    User sees tasks created from Kafka events
  </text>
  
  <rect x="650" y="1100" width="500" height="180" fill="white" rx="10" stroke="#e74c3c" stroke-width="2"/>
  <text x="900" y="1130" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c3e50" font-family="Arial, sans-serif">
    NotificationCenter Component
  </text>
  <text x="670" y="1155" font-size="13" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ GET /api/notifications/user/{userId}
  </text>
  <text x="670" y="1175" font-size="13" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Shows notifications for user
  </text>
  <text x="670" y="1195" font-size="13" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Badge count for unread notifications
  </text>
  <text x="670" y="1215" font-size="13" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Mark as read functionality
  </text>
  <text x="900" y="1245" font-size="11" text-anchor="middle" fill="#7f8c8d" font-family="Arial, sans-serif">
    User sees notifications created from Kafka events
  </text>
  
  <rect x="1200" y="1100" width="500" height="180" fill="white" rx="10" stroke="#27ae60" stroke-width="2"/>
  <text x="1450" y="1130" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c3e50" font-family="Arial, sans-serif">
    Work Queue Component
  </text>
  <text x="1220" y="1155" font-size="13" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ GET /api/tasks/queue/{queueName}
  </text>
  <text x="1220" y="1175" font-size="13" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Shows shared task queues (payroll_queue, etc.)
  </text>
  <text x="1220" y="1195" font-size="13" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Role-based access control
  </text>
  <text x="1220" y="1215" font-size="13" text-anchor="start" fill="#34495e" font-family="Arial, sans-serif">
    ‚Ä¢ Team collaboration views
  </text>
  <text x="1450" y="1245" font-size="11" text-anchor="middle" fill="#7f8c8d" font-family="Arial, sans-serif">
    Teams see tasks assigned to their queue
  </text>
  
  <!-- Database to Frontend arrows -->
  <path d="M 1280 1000 Q 1280 1050 350 1100" stroke="#3498db" stroke-width="3" fill="none" marker-end="url(#arrowBlue)" stroke-dasharray="4,4"/>
  <text x="815" y="1045" font-size="12" text-anchor="middle" fill="#3498db" font-family="Arial, sans-serif">
    REST API
  </text>
  
  <path d="M 1500 1000 Q 1500 1050 900 1100" stroke="#e74c3c" stroke-width="3" fill="none" marker-end="url(#arrowRed)" stroke-dasharray="4,4"/>
  
  <path d="M 1500 1000 Q 1500 1050 1450 1100" stroke="#27ae60" stroke-width="3" fill="none" marker-end="url(#arrowGreen)" stroke-dasharray="4,4"/>
  
  <!-- Footer Summary -->
  <rect x="50" y="1330" width="1700" height="60" fill="#2c3e50" rx="10"/>
  <text x="900" y="1355" font-size="16" font-weight="bold" text-anchor="middle" fill="white" font-family="Arial, sans-serif">
    Summary: Producer publishes events ‚Üí Kafka stores ‚Üí Consumer processes ‚Üí Tasks &amp; Notifications created ‚Üí Frontend displays
  </text>
  <text x="900" y="1378" font-size="13" text-anchor="middle" fill="#ecf0f1" font-family="Arial, sans-serif">
    ‚úÖ Decoupled Architecture | ‚úÖ Scalable | ‚úÖ Fault Tolerant | ‚úÖ Event-Driven | ‚úÖ Real-time Updates
  </text>
</svg>


