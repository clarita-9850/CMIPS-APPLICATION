<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="900" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: bold 28px sans-serif; fill: #2c3e50; }
      .subtitle { font: 18px sans-serif; fill: #34495e; }
      .layer-title { font: bold 16px sans-serif; fill: #ffffff; }
      .text { font: 14px sans-serif; fill: #2c3e50; }
      .text-white { font: 13px sans-serif; fill: #ffffff; }
      .small-text { font: 12px sans-serif; fill: #7f8c8d; }
      .check { font: 16px sans-serif; fill: #27ae60; }
    </style>
    <linearGradient id="layer1" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#e74c3c;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c0392b;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="layer2" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#e67e22;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d35400;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="layer3" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#f39c12;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d68910;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="layer4" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2980b9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="layer5" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#9b59b6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8e44ad;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="layer6" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#27ae60;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#229954;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <!-- Title -->
  <text x="600" y="40" text-anchor="middle" class="title">Multi-Layer Security Architecture</text>
  <text x="600" y="70" text-anchor="middle" class="subtitle">Defense in Depth - Six Layers of Protection</text>
  
  <!-- User Request -->
  <rect x="500" y="100" width="200" height="50" rx="10" fill="#ecf0f1" stroke="#95a5a6" stroke-width="2" />
  <text x="600" y="125" text-anchor="middle" class="text" font-weight="bold">User Request</text>
  <text x="600" y="143" text-anchor="middle" class="small-text">API Call with Data</text>
  
  <!-- Arrow Down -->
  <path d="M 600 150 L 600 180" stroke="#34495e" stroke-width="3" fill="none" marker-end="url(#arrow)" />
  
  <!-- Layer 1: Network Security -->
  <rect x="100" y="180" width="1000" height="100" rx="8" fill="url(#layer1)" />
  <text x="150" y="215" class="layer-title">Layer 1: Network Security</text>
  <text x="150" y="240" class="text-white">✓ HTTPS/TLS 1.3 Encryption</text>
  <text x="150" y="260" class="text-white">✓ Firewall Rules &amp; DDoS Protection</text>
  
  <rect x="700" y="195" width="380" height="70" rx="5" fill="rgba(255,255,255,0.2)" />
  <text x="720" y="215" class="text-white" font-weight="bold">Protection Against:</text>
  <text x="720" y="235" class="text-white">• Man-in-the-Middle Attacks</text>
  <text x="720" y="255" class="text-white">• Network Eavesdropping</text>
  <text x="720" y="270" class="text-white">• DDoS Attacks</text>
  
  <!-- Arrow Down -->
  <path d="M 600 280 L 600 300" stroke="#34495e" stroke-width="3" fill="none" marker-end="url(#arrow)" />
  
  <!-- Layer 2: Authentication -->
  <rect x="100" y="300" width="1000" height="100" rx="8" fill="url(#layer2)" />
  <text x="150" y="335" class="layer-title">Layer 2: Authentication (Who are you?)</text>
  <text x="150" y="360" class="text-white">✓ OAuth2 / OpenID Connect</text>
  <text x="150" y="380" class="text-white">✓ JWT Token Validation</text>
  
  <rect x="700" y="315" width="380" height="70" rx="5" fill="rgba(255,255,255,0.2)" />
  <text x="720" y="335" class="text-white" font-weight="bold">Validates:</text>
  <text x="720" y="355" class="text-white">• User Identity (Username/Password)</text>
  <text x="720" y="370" class="text-white">• Token Signature &amp; Expiration</text>
  <text x="720" y="385" class="text-white">• Session State</text>
  
  <!-- Arrow Down -->
  <path d="M 600 400 L 600 420" stroke="#34495e" stroke-width="3" fill="none" marker-end="url(#arrow)" />
  
  <!-- Layer 3: Authorization -->
  <rect x="100" y="420" width="1000" height="100" rx="8" fill="url(#layer3)" />
  <text x="150" y="455" class="layer-title">Layer 3: Authorization (What can you do?)</text>
  <text x="150" y="480" class="text-white">✓ Role-Based Access Control (RBAC)</text>
  <text x="150" y="500" class="text-white">✓ Resource-Level Permissions</text>
  
  <rect x="700" y="435" width="380" height="70" rx="5" fill="rgba(255,255,255,0.2)" />
  <text x="720" y="455" class="text-white" font-weight="bold">Checks:</text>
  <text x="720" y="475" class="text-white">• User Role (Provider, Case Worker, etc.)</text>
  <text x="720" y="490" class="text-white">• Resource Access Permission</text>
  <text x="720" y="505" class="text-white">• Scope Validation (read, create, edit)</text>
  
  <!-- Arrow Down -->
  <path d="M 600 520 L 600 540" stroke="#34495e" stroke-width="3" fill="none" marker-end="url(#arrow)" />
  
  <!-- Layer 4: Field-Level Security -->
  <rect x="100" y="540" width="1000" height="100" rx="8" fill="url(#layer4)" />
  <text x="150" y="575" class="layer-title">Layer 4: Field-Level Security (What can you see?)</text>
  <text x="150" y="600" class="text-white">✓ Dynamic Field Filtering</text>
  <text x="150" y="620" class="text-white">✓ Context-Aware Access Control</text>
  
  <rect x="700" y="555" width="380" height="70" rx="5" fill="rgba(255,255,255,0.2)" />
  <text x="720" y="575" class="text-white" font-weight="bold">Filters:</text>
  <text x="720" y="595" class="text-white">• Request Fields (Before Processing)</text>
  <text x="720" y="610" class="text-white">• Response Fields (Before Sending)</text>
  <text x="720" y="625" class="text-white">• Based on Role + Operation Type</text>
  
  <!-- Arrow Down -->
  <path d="M 600 640 L 600 660" stroke="#34495e" stroke-width="3" fill="none" marker-end="url(#arrow)" />
  
  <!-- Layer 5: Business Logic -->
  <rect x="100" y="660" width="1000" height="100" rx="8" fill="url(#layer5)" />
  <text x="150" y="695" class="layer-title">Layer 5: Business Logic Validation</text>
  <text x="150" y="720" class="text-white">✓ Status Validation (e.g., only delete DRAFT)</text>
  <text x="150" y="740" class="text-white">✓ Ownership Verification</text>
  
  <rect x="700" y="675" width="380" height="70" rx="5" fill="rgba(255,255,255,0.2)" />
  <text x="720" y="695" class="text-white" font-weight="bold">Enforces:</text>
  <text x="720" y="715" class="text-white">• Business Rules (workflow status)</text>
  <text x="720" y="730" class="text-white">• Data Ownership (user can edit own data)</text>
  <text x="720" y="745" class="text-white">• Compliance Requirements</text>
  
  <!-- Arrow Down -->
  <path d="M 600 760 L 600 780" stroke="#34495e" stroke-width="3" fill="none" marker-end="url(#arrow)" />
  
  <!-- Layer 6: Audit & Compliance -->
  <rect x="100" y="780" width="1000" height="80" rx="8" fill="url(#layer6)" />
  <text x="150" y="815" class="layer-title">Layer 6: Audit &amp; Compliance</text>
  <text x="150" y="840" class="text-white">✓ Complete Access Logging • Change Tracking • Compliance Reports</text>
  
  <rect x="700" y="795" width="380" height="50" rx="5" fill="rgba(255,255,255,0.2)" />
  <text x="720" y="815" class="text-white" font-weight="bold">Records:</text>
  <text x="720" y="835" class="text-white">• Who accessed what, when, and from where</text>
  
  <!-- Arrow Down to Result -->
  <path d="M 600 860 L 600 880" stroke="#27ae60" stroke-width="4" fill="none" marker-end="url(#arrow-green)" />
  
  <!-- Authorized Response -->
  <rect x="500" y="880" width="200" height="50" rx="10" fill="#d5f4e6" stroke="#27ae60" stroke-width="3" />
  <text x="600" y="905" text-anchor="middle" class="text" font-weight="bold" fill="#27ae60">✓ Authorized Response</text>
  <text x="600" y="923" text-anchor="middle" class="small-text">Filtered &amp; Validated Data</text>
  
  <!-- Arrows -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#34495e" />
    </marker>
    <marker id="arrow-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#27ae60" />
    </marker>
  </defs>
</svg>


