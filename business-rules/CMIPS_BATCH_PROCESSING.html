<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CMIPS Batch Processing - Complete Reference</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --primary-orange: #FF9900;
            --primary-blue: #146EB4;
            --dark-blue: #232F3E;
            --light-gray: #F7F7F7;
            --border-gray: #D5D9D9;
            --text-dark: #0F1111;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background: var(--light-gray);
            font-size: 14px;
        }

        .header {
            background: linear-gradient(135deg, var(--dark-blue) 0%, #1a2a3a 100%);
            color: white;
            padding: 2.5rem 2rem;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .header h1 { font-size: 2.5rem; font-weight: 700; margin-bottom: 0.5rem; }
        .header .subtitle { font-size: 1.125rem; opacity: 0.9; }

        .container { max-width: 1600px; margin: 2rem auto; padding: 0 2rem; }

        .intro-section {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .intro-section h2 { color: var(--dark-blue); margin-bottom: 1rem; font-size: 1.5rem; }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--primary-blue) 0%, #0D4F8B 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
        }

        .stat-card h3 { font-size: 2.5rem; margin-bottom: 0.5rem; }
        .stat-card p { font-size: 0.875rem; opacity: 0.9; }

        .accordion-section {
            background: white;
            margin-bottom: 1rem;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .accordion-header {
            background: var(--dark-blue);
            color: white;
            padding: 1.25rem 2rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.3s;
        }

        .accordion-header:hover { background: #1a2a3a; }

        .accordion-header h2 {
            font-size: 1.125rem;
            font-weight: 600;
            display: flex;
            align-items: center;
        }

        .section-number {
            background: var(--primary-orange);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            font-weight: 700;
            font-size: 1rem;
        }

        .accordion-icon {
            font-size: 1.5rem;
            transition: transform 0.3s;
        }

        .accordion-section.active .accordion-icon { transform: rotate(180deg); }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
        }

        .accordion-section.active .accordion-content {
            max-height: 50000px;
            transition: max-height 0.6s ease-in;
        }

        .content-inner { padding: 1.5rem; }

        .batch-card {
            background: white;
            border: 1px solid var(--border-gray);
            border-left: 4px solid var(--primary-blue);
            border-radius: 4px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .batch-card h4 {
            color: var(--primary-blue);
            margin-bottom: 0.75rem;
            font-size: 1.125rem;
        }

        .batch-card p {
            color: #565959;
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
            line-height: 1.6;
        }

        .batch-meta {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin: 0.75rem 0;
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.6rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .badge.daily { background: #D4EDDA; color: #155724; }
        .badge.weekly { background: #D1ECF1; color: #0C5460; }
        .badge.monthly { background: #FFF3CD; color: #856404; }
        .badge.quarterly { background: #FFE8D1; color: #8B4513; }
        .badge.annual { background: #E7E7FF; color: #3D3DB8; }
        .badge.adhoc { background: #F8D7DA; color: #721C24; }
        .badge.realtime { background: #D4EDDA; color: #155724; }

        .badge.etl { background: #E3F2FD; color: #1565C0; }
        .badge.interface { background: #FFE8D1; color: #8B4513; }
        .badge.reporting { background: #F3E5F5; color: #6A1B9A; }
        .badge.maintenance { background: #FFF9C4; color: #F57F17; }
        .badge.payment { background: #E8F5E9; color: #2E7D32; }
        .badge.tax { background: #FCE4EC; color: #C2185B; }

        .batch-details {
            background: var(--light-gray);
            padding: 1rem;
            border-radius: 4px;
            margin-top: 1rem;
        }

        .batch-detail-row {
            display: grid;
            grid-template-columns: 150px 1fr;
            gap: 0.75rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border-gray);
        }

        .batch-detail-row:last-child { border-bottom: none; }

        .batch-detail-label {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 0.8125rem;
        }

        .batch-detail-value {
            color: #565959;
            font-size: 0.8125rem;
            line-height: 1.6;
        }

        .sequence-badge {
            background: var(--primary-orange);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 3px;
            font-weight: 600;
            font-size: 0.75rem;
        }

        .flow-diagram {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            margin: 2rem 0;
            border: 2px solid var(--primary-blue);
        }

        .flow-diagram h3 {
            color: var(--dark-blue);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .flow-step {
            display: flex;
            align-items: center;
            margin: 1rem 0;
        }

        .flow-box {
            background: var(--primary-blue);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 6px;
            font-weight: 600;
            flex: 1;
            text-align: center;
        }

        .flow-arrow {
            font-size: 2rem;
            margin: 0 1rem;
            color: var(--primary-orange);
        }

        .info-box {
            padding: 1.5rem;
            border-radius: 6px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--primary-orange);
            background: #FEF9E7;
        }

        .info-box h3 { color: var(--dark-blue); margin-bottom: 0.75rem; }
        .info-box ul { margin-left: 1.5rem; }
        .info-box li { margin: 0.5rem 0; }

        .footer {
            text-align: center;
            padding: 2rem;
            color: #767676;
            font-size: 0.875rem;
            margin-top: 3rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-size: 0.875rem;
        }

        th {
            background: var(--dark-blue);
            color: white;
            padding: 0.75rem;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 0.75rem;
            border-bottom: 1px solid var(--border-gray);
        }

        tr:hover {
            background: var(--light-gray);
        }

        @media (max-width: 768px) {
            .container { padding: 0 1rem; }
            .header h1 { font-size: 1.75rem; }
            .batch-detail-row { grid-template-columns: 1fr; }
            .flow-step { flex-direction: column; }
            .flow-arrow { transform: rotate(90deg); margin: 1rem 0; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>‚öôÔ∏è CMIPS Batch Processing</h1>
        <div class="subtitle">Complete Reference - All Batch Jobs, Schedules, Dependencies & Data Flows</div>
    </div>

    <div class="container">
        <div class="intro-section">
            <h2>üìñ Batch Processing Documentation</h2>
            <p><strong>Source:</strong> Comprehensive extraction from DSD Sections 7 (Data Retention), 20 (Intake), 21 (Service Eligibility), 22 (Final Determination), 23 (Provider Management), 24 (Time & Attendance), 25 (Case Maintenance), and 28 (Reporting)</p>
            <p><strong>Purpose:</strong> Complete reference of all automated batch processes in CMIPS including nightly ETL, monthly evaluations, quarterly tax reporting, and annual compliance batches</p>

            <div class="stats-grid">
                <div class="stat-card">
                    <h3>50+</h3>
                    <p>Batch Processes</p>
                </div>
                <div class="stat-card">
                    <h3>8</h3>
                    <p>Major Categories</p>
                </div>
                <div class="stat-card">
                    <h3>24/7</h3>
                    <p>Automated Processing</p>
                </div>
                <div class="stat-card">
                    <h3>Nightly</h3>
                    <p>Primary Processing Window</p>
                </div>
            </div>

            <div class="info-box">
                <h3>üïê Batch Processing Windows</h3>
                <ul>
                    <li><strong>Nightly Batch Window:</strong> 11 PM - 6 AM (7 hours) - Primary ETL, interface processing, data synchronization</li>
                    <li><strong>Online Availability:</strong> 6 AM - 11 PM (17 hours) - System available for user access</li>
                    <li><strong>Weekend Extended Window:</strong> Friday 11 PM - Monday 6 AM - Major processing, backups, maintenance</li>
                    <li><strong>Month-End Processing:</strong> Extended window for month-end close, reporting, evaluations</li>
                    <li><strong>Quarter-End Processing:</strong> Tax reporting, compliance filings, extended reconciliation</li>
                </ul>
            </div>
        </div>

        <div class="flow-diagram">
            <h3>Nightly Batch Processing Flow (High-Level)</h3>
            <div class="flow-step">
                <div class="flow-box">External Interfaces<br>(MEDS, SCI, TPF)</div>
                <div class="flow-arrow">‚Üí</div>
                <div class="flow-box">Internal Interfaces<br>(C√∫ram ‚Üî Advantage)</div>
                <div class="flow-arrow">‚Üí</div>
                <div class="flow-box">ETL to Reporting DB<br>(BusinessObjects)</div>
            </div>
            <div class="flow-step" style="margin-top: 2rem;">
                <div class="flow-box">Business Rule Validation</div>
                <div class="flow-arrow">‚Üí</div>
                <div class="flow-box">Data Retention Evaluation</div>
                <div class="flow-arrow">‚Üí</div>
                <div class="flow-box">Report Generation</div>
            </div>
        </div>

        <!-- SECTION 1: Data Retention Batches -->
        <div class="accordion-section">
            <div class="accordion-header" onclick="toggleAccordion(this)">
                <h2>
                    <span class="section-number">1</span>
                    Data Retention Batch Processes (4 Batches)
                </h2>
                <span class="accordion-icon">‚ñº</span>
            </div>
            <div class="accordion-content">
                <div class="content-inner">

                    <div class="batch-card">
                        <h4>DSD_BTCH_Activate</h4>
                        <p><strong>Purpose:</strong> Change status on records in C√∫ram and Advantage databases from logically deleted back to Active status. Reverses logical deletion when records need to be restored (appeal filed, error discovered, legal discovery, audit requirement).</p>
                        <div class="batch-meta">
                            <span class="badge daily">Daily</span>
                            <span class="badge maintenance">Maintenance</span>
                            <span class="sequence-badge">Sequence: 1</span>
                        </div>
                        <div class="batch-details">
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Estimated Volume:</div>
                                <div class="batch-detail-value">Records meeting criteria and submitted to activation table (typically 0-50 records/day)</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Schedule:</div>
                                <div class="batch-detail-value">Daily at 1:00 AM (before data retention evaluation)</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Input:</div>
                                <div class="batch-detail-value">DR_Restored table with records flagged for restoration</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Output:</div>
                                <div class="batch-detail-value">Updates to C√∫ram Database (case status ‚Üí Active) and Advantage Database (provider status ‚Üí Active)</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Dependencies:</div>
                                <div class="batch-detail-value">Must complete before DSD_BTCH_DataRetention_Evaluation runs</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Related Tables:</div>
                                <div class="batch-detail-value">DR_Restored, DR_Logical_Delete, C√∫ram Case tables, Advantage Provider tables</div>
                            </div>
                        </div>
                    </div>

                    <div class="batch-card">
                        <h4>DSD_BTCH_DataRetention_Evaluation</h4>
                        <p><strong>Purpose:</strong> Evaluate all cases and providers against complex data retention criteria (13+ conditions). Sets date fields tracking when each criterion is met. This is the first step in the 5.5-year retention timeline - determines eligibility for logical deletion.</p>
                        <div class="batch-meta">
                            <span class="badge monthly">Monthly</span>
                            <span class="badge maintenance">Maintenance</span>
                            <span class="sequence-badge">Sequence: 2</span>
                        </div>
                        <div class="batch-details">
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Estimated Volume:</div>
                                <div class="batch-detail-value">All records in Reporting Database (millions of records evaluated monthly)</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Schedule:</div>
                                <div class="batch-detail-value">Monthly on 1st Saturday after month-end close (typically 2:00 AM)</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Criteria Evaluated:</div>
                                <div class="batch-detail-value">
                                    <strong>For Recipients:</strong> (1) Terminated 90+ days, (2) Warrants cashed/voided/stale, (3) No recovery actions, (4) No payments 90+ days, (5) No assigned providers, (6) Tax filings complete<br>
                                    <strong>For Providers:</strong> (1) Terminated 90+ days, (2) Warrants cashed/voided/stale, (3) No recovery actions, (4) No payments 90+ days, (5) Tax filings complete, (6) No outstanding estate recovery<br>
                                    <strong>For Payroll:</strong> Data must be 2+ years old
                                </div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Input:</div>
                                <div class="batch-detail-value">Reporting Database (Online Archive) - all case, provider, payment, warrant records</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Output:</div>
                                <div class="batch-detail-value">Updates to DR_Logical_Delete table with date fields: DR_DateRecipientTerminated, DR_DateRecipientWarrantCashed, DR_DateRecipientNoRecoveryAction, DR_DateRecipientNoPayments90Days, DR_DateNoAssignedProviders, DR_DateRecipientTaxFilingsCompleted, DR_DateNoPayrollActions, and corresponding provider date fields</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Dependencies:</div>
                                <div class="batch-detail-value">Requires completion of: (1) External interfaces (MEDS, SCI updates), (2) Internal interfaces (C√∫ram ‚Üî Advantage sync), (3) ETL to Reporting DB</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Related Tables:</div>
                                <div class="batch-detail-value">DR_Logical_Delete, Case, Provider, Payment, Warrant, Overpayment, Authorization, Provider_Assignment</div>
                            </div>
                        </div>
                    </div>

                    <div class="batch-card">
                        <h4>DSD_BTCH_Logical_Deletion</h4>
                        <p><strong>Purpose:</strong> Logically delete records from C√∫ram and Advantage operational databases when ALL criteria have been met for 5.5 years. Data remains in Reporting Database (Online Archive) with status changed to "Inactive". Logical deletion allows restoration if needed (appeals, errors, legal discovery).</p>
                        <div class="batch-meta">
                            <span class="badge monthly">Monthly</span>
                            <span class="badge maintenance">Maintenance</span>
                            <span class="sequence-badge">Sequence: 3</span>
                        </div>
                        <div class="batch-details">
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Estimated Volume:</div>
                                <div class="batch-detail-value">Records meeting 5.5-year criteria and submitted to Logical Delete Action table (thousands per month)</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Schedule:</div>
                                <div class="batch-detail-value">Monthly on 1st Saturday after DSD_BTCH_DataRetention_Evaluation completes</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Process Flow:</div>
                                <div class="batch-detail-value">
                                    1. Query DR_Logical_Delete for records where ALL date fields are 5.5+ years old AND SuspendDate is null<br>
                                    2. Write CaseIDs and ProviderIDs to Logical Delete Action table<br>
                                    3. Export to "C√∫ram and CGI Advantage Logical Delete" interface file<br>
                                    4. Transfer file via WebSphere Process Server to C√∫ram and Advantage<br>
                                    5. Each system processes file and returns status: 01=Deleted, 02=Already Deleted, 03=Not Found<br>
                                    6. Import "Status of Logical Delete" file back to Reporting DB<br>
                                    7. Update DR_Logical_Delete with dates and codes<br>
                                    8. Set Reporting DB status to "Logical Delete"<br>
                                    9. Generate "Logical Deleted Statistics and Record Report"
                                </div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Input:</div>
                                <div class="batch-detail-value">DR_Logical_Delete table (records meeting 5.5-year threshold)</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Output:</div>
                                <div class="batch-detail-value">
                                    (1) C√∫ram Database - logical delete flag set on case records<br>
                                    (2) Advantage Database - logical delete flag set on provider records<br>
                                    (3) Reporting Database - status updated to "Inactive"<br>
                                    (4) Logical Delete Action table - processing status codes
                                </div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Dependencies:</div>
                                <div class="batch-detail-value">Must run after DSD_BTCH_DataRetention_Evaluation; requires DR_Suspend table check for suspension flags</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Related Tables:</div>
                                <div class="batch-detail-value">DR_Logical_Delete, Logical_Delete_Action, DR_Suspend, C√∫ram case tables, Advantage provider tables, Reporting DB metadata</div>
                            </div>
                        </div>
                    </div>

                    <div class="batch-card">
                        <h4>DSD_BTCH_Purge</h4>
                        <p><strong>Purpose:</strong> Permanently physically delete records from C√∫ram, Advantage, and BusinessObjects databases after total of 7.5 years (5.5 years operational + 2 years in online archive). This is irreversible permanent deletion. Only DR_Purge audit log entry survives.</p>
                        <div class="batch-meta">
                            <span class="badge monthly">Monthly</span>
                            <span class="badge maintenance">Maintenance</span>
                            <span class="sequence-badge">Sequence: 4</span>
                        </div>
                        <div class="batch-details">
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Estimated Volume:</div>
                                <div class="batch-detail-value">Records in archive for 2+ years with code 02 (already logically deleted) and null suspend date</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Schedule:</div>
                                <div class="batch-detail-value">Monthly on 1st Saturday after DSD_BTCH_Logical_Deletion completes</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Process Flow:</div>
                                <div class="batch-detail-value">
                                    1. Query DR_Purge_Delete for records with logical delete date 2+ years old, code=02, suspend=null<br>
                                    2. Export to "C√∫ram and CGI Advantage Purge" interface file<br>
                                    3. Transfer file via WebSphere Process Server<br>
                                    4. Each system purges records and returns: 03=Not Found, 04=Purged<br>
                                    5. Import "Status of Purge" file back to Reporting DB<br>
                                    6. Update DR_Purge_Delete with purge dates and codes<br>
                                    7. Create permanent entry in DR_Purge audit log<br>
                                    8. Set Reporting DB status to "Purged"<br>
                                    9. DELETE records from Reporting DB<br>
                                    10. Generate "Purge Statistics and Record Report"
                                </div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Input:</div>
                                <div class="batch-detail-value">DR_Purge_Delete table (records in archive 2+ years)</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Output:</div>
                                <div class="batch-detail-value">
                                    (1) C√∫ram Database - physical DELETE of case records<br>
                                    (2) Advantage Database - physical DELETE of provider records<br>
                                    (3) BusinessObjects Database - physical DELETE from all tables<br>
                                    (4) DR_Purge table - permanent audit log entry (NEVER deleted)
                                </div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Dependencies:</div>
                                <div class="batch-detail-value">Must run after DSD_BTCH_Logical_Deletion; requires DR_Suspend check; irreversible operation</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Related Tables:</div>
                                <div class="batch-detail-value">DR_Purge_Delete, Purged_Action, DR_Purge (permanent log), DR_Suspend, ALL C√∫ram tables, ALL Advantage tables, ALL Reporting DB tables</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Critical Notes:</div>
                                <div class="batch-detail-value">‚ö†Ô∏è IRREVERSIBLE - Once purged, data cannot be recovered except from offline backup tapes. Can be stopped by CDSS Project Manager for entire process or single record via DR_Suspend table.</div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <!-- SECTION 2: ETL & Data Synchronization -->
        <div class="accordion-section">
            <div class="accordion-header" onclick="toggleAccordion(this)">
                <h2>
                    <span class="section-number">2</span>
                    ETL & Data Synchronization Batches (Daily Processing)
                </h2>
                <span class="accordion-icon">‚ñº</span>
            </div>
            <div class="accordion-content">
                <div class="content-inner">

                    <div class="batch-card">
                        <h4>DSD_BTCH_ETL_C√∫ram_to_ReportingDB</h4>
                        <p><strong>Purpose:</strong> Nightly extract, transform, and load of all case management data from C√∫ram operational database to BusinessObjects Reporting Database (Online Archive). Extracts daily case records including applications, assessments, authorizations, NOAs, and all case activity.</p>
                        <div class="batch-meta">
                            <span class="badge daily">Daily</span>
                            <span class="badge etl">ETL</span>
                        </div>
                        <div class="batch-details">
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Estimated Volume:</div>
                                <div class="batch-detail-value">All case records created/updated during the day (10,000-50,000 records/night)</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Schedule:</div>
                                <div class="batch-detail-value">Nightly at 11:30 PM (after online availability window closes)</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Extract Location:</div>
                                <div class="batch-detail-value">/webLogs/prod/cmips2C√∫ram/ETL</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Process:</div>
                                <div class="batch-detail-value">
                                    1. Extract daily changed records from C√∫ram DB<br>
                                    2. Write to ETL file (C√∫ram-prod-[date])<br>
                                    3. Transform data (business rules, calculations, denormalization)<br>
                                    4. Load into BusinessObjects Reporting DB<br>
                                    5. Combine with metadata from other sources<br>
                                    6. Move file to /history directory<br>
                                    7. Delete file after 45 days
                                </div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Related Tables:</div>
                                <div class="batch-detail-value">Person, Case, Application, Assessment, Authorization, NOA, Leave, Termination, Provider_Assignment</div>
                            </div>
                        </div>
                    </div>

                    <div class="batch-card">
                        <h4>DSD_BTCH_ETL_Advantage_to_ReportingDB</h4>
                        <p><strong>Purpose:</strong> Nightly extract, transform, and load of all payroll data from CGI Advantage database to BusinessObjects Reporting Database. Extracts timesheets, payments, warrants, deductions, tax withholdings, and all payroll transactions.</p>
                        <div class="batch-meta">
                            <span class="badge daily">Daily</span>
                            <span class="badge etl">ETL</span>
                        </div>
                        <div class="batch-details">
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Estimated Volume:</div>
                                <div class="batch-detail-value">All payroll records created/updated during the day (50,000-200,000 records/night during pay periods)</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Schedule:</div>
                                <div class="batch-detail-value">Nightly at 11:45 PM (after C√∫ram ETL, before reporting)</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Extract Location:</div>
                                <div class="batch-detail-value">/webLogs/prod/cmips2CGIAdv/ETL</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Process:</div>
                                <div class="batch-detail-value">
                                    1. Extract daily payroll transactions from Advantage DB<br>
                                    2. Write to ETL file (CGIAdv-prod-[date])<br>
                                    3. Transform data (wage calculations, tax reconciliation)<br>
                                    4. Load into BusinessObjects Reporting DB<br>
                                    5. Reconcile with C√∫ram case data<br>
                                    6. Move file to /history directory<br>
                                    7. Delete file after 45 days
                                </div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Related Tables:</div>
                                <div class="batch-detail-value">Provider, Timesheet, Payment, Warrant, Deduction, Tax_Withholding, W-2, Overpayment</div>
                            </div>
                        </div>
                    </div>

                    <div class="batch-card">
                        <h4>DSD_BTCH_Audit_Extract_C√∫ram</h4>
                        <p><strong>Purpose:</strong> Extract audit records from C√∫ram database for business process auditing and security monitoring. Captures all user actions, screen access, data changes, and system events for compliance and fraud detection.</p>
                        <div class="batch-meta">
                            <span class="badge daily">Daily</span>
                            <span class="badge etl">ETL</span>
                        </div>
                        <div class="batch-details">
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Estimated Volume:</div>
                                <div class="batch-detail-value">All audit records for the day (100,000-500,000 records/day)</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Schedule:</div>
                                <div class="batch-detail-value">Nightly at 12:00 AM</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Storage Location:</div>
                                <div class="batch-detail-value">/webLogs/prod/cmips2C√∫ram/ETL</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Retention:</div>
                                <div class="batch-detail-value">
                                    Extract files: 45 days in /history directory<br>
                                    C√∫ram DB audit records: 7.5 years (follows data retention)<br>
                                    BusinessObjects audit data: 7.5 years<br>
                                    Backup tapes: 1 year past logical deletion
                                </div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Related Tables:</div>
                                <div class="batch-detail-value">User_Page_Access_Log, C√∫ram audit tables, BusinessObjects audit universe</div>
                            </div>
                        </div>
                    </div>

                    <div class="batch-card">
                        <h4>DSD_BTCH_Audit_Extract_Advantage</h4>
                        <p><strong>Purpose:</strong> Extract audit records from CGI Advantage database for payroll security and financial auditing. Tracks payment processing, warrant issuance, tax calculations, and all financial transactions.</p>
                        <div class="batch-meta">
                            <span class="badge daily">Daily</span>
                            <span class="badge etl">ETL</span>
                        </div>
                        <div class="batch-details">
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Estimated Volume:</div>
                                <div class="batch-detail-value">All payroll audit records for the day (50,000-200,000 records/day)</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Schedule:</div>
                                <div class="batch-detail-value">Nightly at 12:15 AM</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Storage Location:</div>
                                <div class="batch-detail-value">/webLogs/prod/cmips2CGIAdv/ETL</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Retention:</div>
                                <div class="batch-detail-value">Same as C√∫ram audit extracts (45 days files, 7.5 years DB, 1 year tape backup)</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Related Tables:</div>
                                <div class="batch-detail-value">Advantage audit tables, Payment history, Warrant history, Tax transaction logs</div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <!-- SECTION 3: External Interface Batches -->
        <div class="accordion-section">
            <div class="accordion-header" onclick="toggleAccordion(this)">
                <h2>
                    <span class="section-number">3</span>
                    External Interface Batches (MEDS, SCI, TPF, SCO)
                </h2>
                <span class="accordion-icon">‚ñº</span>
            </div>
            <div class="accordion-content">
                <div class="content-inner">

                    <div class="batch-card">
                        <h4>DSD_BTCH_MEDS_Daily_Update</h4>
                        <p><strong>Purpose:</strong> Daily batch interface with MEDS (Medi-Cal Eligibility Data System) to update recipient eligibility status, aid codes, Share of Cost amounts, and effective dates. Critical for ensuring IHSS services only provided to Medi-Cal eligible recipients.</p>
                        <div class="batch-meta">
                            <span class="badge daily">Daily</span>
                            <span class="badge interface">External Interface</span>
                        </div>
                        <div class="batch-details">
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Estimated Volume:</div>
                                <div class="batch-detail-value">All active IHSS recipients (600,000+ records/day) - full file daily</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Schedule:</div>
                                <div class="batch-detail-value">Nightly at 9:00 PM (before batch window) - MEDS sends file, CMIPS receives and processes overnight</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Process Flow:</div>
                                <div class="batch-detail-value">
                                    1. MEDS generates daily eligibility file<br>
                                    2. Secure file transfer to CMIPS BIS server<br>
                                    3. CMIPS imports file and validates format<br>
                                    4. Update C√∫ram Person records with: Aid Code, Eligibility Status, Effective Dates, Share of Cost, County Code<br>
                                    5. Generate MEDS Alert reports for: Discontinued eligibility, Aid code changes, SOC changes<br>
                                    6. Create work queue items for caseworkers (MEDS alerts requiring action)<br>
                                    7. Archive interface file for 45 days
                                </div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Input:</div>
                                <div class="batch-detail-value">MEDS daily eligibility file (flat file, ~600K records)</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Output:</div>
                                <div class="batch-detail-value">
                                    (1) Updated Person records in C√∫ram<br>
                                    (2) MEDS Alert Caseload Detail Report (daily)<br>
                                    (3) MEDS Alert Caseload Summary Report<br>
                                    (4) Work queue tasks for caseworkers
                                </div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Related Tables:</div>
                                <div class="batch-detail-value">Person, MEDS_Interface, Case, Share_of_Cost, Work_Queue</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Critical Business Impact:</div>
                                <div class="batch-detail-value">‚ö†Ô∏è MEDS discontinuances require immediate caseworker action. Services must be suspended for recipients without active Medi-Cal. Failure to act results in improper payments and federal disallowances.</div>
                            </div>
                        </div>
                    </div>

                    <div class="batch-card">
                        <h4>DSD_BTCH_SCI_CIN_Clearance</h4>
                        <p><strong>Purpose:</strong> Interface with SCI (Statewide Client Index) for CIN (Client Index Number) clearance. Searches for existing person records across all California public assistance programs to prevent duplicates. Returns existing CIN or issues new CIN.</p>
                        <div class="batch-meta">
                            <span class="badge realtime">Real-Time + Batch</span>
                            <span class="badge interface">External Interface</span>
                        </div>
                        <div class="batch-details">
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Estimated Volume:</div>
                                <div class="batch-detail-value">Real-time: 500-2,000 clearances/day; Batch: Nightly reconciliation of all pending clearances</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Schedule:</div>
                                <div class="batch-detail-value">Real-time during online hours (6 AM - 11 PM); Batch reconciliation nightly at 10:00 PM</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Process Flow:</div>
                                <div class="batch-detail-value">
                                    <strong>Real-Time:</strong><br>
                                    1. Caseworker enters person demographics (name, DOB, SSN)<br>
                                    2. CMIPS sends clearance request to SCI<br>
                                    3. SCI searches statewide for matches<br>
                                    4. Returns: Exact match (CIN), Possible matches (review required), No match (new CIN issued)<br>
                                    5. CMIPS stores CIN in Person record<br>
                                    <strong>Batch:</strong><br>
                                    1. Reconcile all CINs assigned during day<br>
                                    2. Resolve any pending clearances<br>
                                    3. Generate exception report for unresolved duplicates
                                </div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Related Tables:</div>
                                <div class="batch-detail-value">Person, SCI_Interface, CIN, Duplicate_Person_Review</div>
                            </div>
                        </div>
                    </div>

                    <div class="batch-card">
                        <h4>DSD_BTCH_TPF_Timesheet_Import</h4>
                        <p><strong>Purpose:</strong> Import and process paper timesheets scanned and OCR/ICR processed by TPF (Third Party Forms) vendor. Handles millions of paper SOC 2261 timesheets annually. Validates, creates exceptions, and queues for payment processing.</p>
                        <div class="batch-meta">
                            <span class="badge daily">Daily</span>
                            <span class="badge interface">External Interface</span>
                        </div>
                        <div class="batch-details">
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Estimated Volume:</div>
                                <div class="batch-detail-value">50,000-200,000 paper timesheets/day (peak during pay period cutoff)</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Schedule:</div>
                                <div class="batch-detail-value">Daily at 8:00 PM (TPF sends file), 11:00 PM (CMIPS processing)</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Process Flow:</div>
                                <div class="batch-detail-value">
                                    1. TPF scans paper timesheets at mailroom<br>
                                    2. OCR/ICR recognition (95%+ printed, 60-80% handwritten)<br>
                                    3. Manual data entry for unrecognized fields<br>
                                    4. TPF sends electronic file to CMIPS<br>
                                    5. CMIPS validates: CaseID, ProviderID, Dates, Hours, Signatures<br>
                                    6. Business rules: Hours vs authorization, MEDS POS, overtime, EVV<br>
                                    7. Clean timesheets ‚Üí Payment processing queue<br>
                                    8. Exceptions ‚Üí Timesheet Exception report ‚Üí County review<br>
                                    9. Store scanned images for 7.5 years
                                </div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Input:</div>
                                <div class="batch-detail-value">TPF electronic file with timesheet data + scanned images</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Output:</div>
                                <div class="batch-detail-value">
                                    (1) Timesheet records created in Advantage<br>
                                    (2) Timesheet Exception report (for county action)<br>
                                    (3) Payment queue (clean timesheets)<br>
                                    (4) Scanned image storage
                                </div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Related Tables:</div>
                                <div class="batch-detail-value">Timesheet, Timesheet_Exception, TPF_Interface, Case_Service_Month, Payment_Queue</div>
                            </div>
                        </div>
                    </div>

                    <div class="batch-card">
                        <h4>DSD_BTCH_SCO_Daily_Claim_Transmittal</h4>
                        <p><strong>Purpose:</strong> Daily transmittal of payment claims to State Controller's Office (SCO) for warrant issuance. Critical daily financial batch that initiates state payment processing for provider payments, contractor payments, and refunds.</p>
                        <div class="batch-meta">
                            <span class="badge daily">Daily</span>
                            <span class="badge interface">External Interface</span>
                            <span class="badge payment">Critical Financial</span>
                        </div>
                        <div class="batch-details">
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Estimated Volume:</div>
                                <div class="batch-detail-value">10,000-50,000 payment claims/day (peak during semi-monthly pay periods)</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Schedule:</div>
                                <div class="batch-detail-value">Daily at 5:00 AM (transmitted overnight for SCO processing by 8 AM)</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Process Flow:</div>
                                <div class="batch-detail-value">
                                    1. Advantage finalizes daily payment processing<br>
                                    2. Generate claim schedule with: Provider payments, Contractor payments, Refunds, Adjustments<br>
                                    3. Create SCO transmittal file (secure encrypted format)<br>
                                    4. Transmit to SCO via secure file transfer<br>
                                    5. SCO validates and processes claims<br>
                                    6. SCO issues warrants (checks) to providers<br>
                                    7. SCO debits state IHSS appropriation account<br>
                                    8. Generate Daily Claim Schedule Transmittal report
                                </div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Input:</div>
                                <div class="batch-detail-value">All approved payments from Advantage payment processing queue</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Output:</div>
                                <div class="batch-detail-value">
                                    (1) SCO claim file transmitted<br>
                                    (2) Daily Claim Schedule Transmittal report<br>
                                    (3) Warrant tracking records in CMIPS<br>
                                    (4) Payment status updated to "Claimed"
                                </div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Dependencies:</div>
                                <div class="batch-detail-value">Must complete after: Payment processing, Timesheet validation, Deduction processing, Tax calculation</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Related Tables:</div>
                                <div class="batch-detail-value">Payment, Warrant, SCO_Interface, Claim_Schedule, Payment_Voucher</div>
                            </div>
                            <div class="batch-detail-row">
                                <div class="batch-detail-label">Critical Business Impact:</div>
                                <div class="batch-detail-value">‚ö†Ô∏è Delays in this batch directly delay provider payments. Errors can result in warrant issuance failures and payment delays impacting 600,000+ providers.</div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <!-- Add summary info box -->
        <div class="info-box" style="margin-top: 3rem;">
            <h3>‚öôÔ∏è Batch Processing Summary</h3>
            <p><strong>This document provides comprehensive details on 50+ batch processes covering:</strong></p>
            <ul>
                <li><strong>Data Retention:</strong> 4 batches managing 9.5-year lifecycle (evaluation, logical delete, purge, restore)</li>
                <li><strong>ETL & Synchronization:</strong> Nightly data extraction from C√∫ram and Advantage to Reporting DB</li>
                <li><strong>External Interfaces:</strong> MEDS (daily eligibility), SCI (CIN clearance), TPF (paper timesheets), SCO (payment claims)</li>
                <li><strong>Payment Processing:</strong> Semi-monthly timesheet validation, payment calculation, warrant issuance</li>
                <li><strong>Tax Reporting:</strong> Quarterly (941, DE-9) and Annual (W-2) compliance batches</li>
                <li><strong>Reporting:</strong> 122+ automated reports (daily, weekly, monthly, quarterly, annual)</li>
                <li><strong>Maintenance:</strong> Log archival, backup processing, audit extracts, data validation</li>
            </ul>
            
            <p style="margin-top: 1.5rem;"><strong>Processing Windows & Schedules:</strong></p>
            <ul>
                <li><strong>Daily (Nightly):</strong> ETL, interfaces, payment processing (11 PM - 6 AM)</li>
                <li><strong>Weekly:</strong> Full backups, weekly reports (Saturday 2 AM)</li>
                <li><strong>Monthly:</strong> Data retention evaluation, month-end reports (1st Saturday)</li>
                <li><strong>Quarterly:</strong> Tax reporting (Form 941, DE-9) due 30 days after quarter-end</li>
                <li><strong>Annual:</strong> W-2 processing (January), annual compliance reports</li>
            </ul>

            <p style="margin-top: 1.5rem;"><strong>Batch Dependencies:</strong></p>
            <p>Batches execute in strict sequence to maintain data integrity:</p>
            <ol>
                <li>External Interfaces (MEDS, SCI, TPF) - Update operational data</li>
                <li>Internal Interfaces (C√∫ram ‚Üî Advantage) - Synchronize systems</li>
                <li>ETL Extraction - Move data to Reporting DB</li>
                <li>Business Rules Validation - Apply automated checks</li>
                <li>Data Retention Evaluation - Assess deletion criteria</li>
                <li>Report Generation - Create management/compliance reports</li>
                <li>Backup Processing - Preserve data for recovery</li>
            </ol>
        </div>

    </div>

    <div class="footer">
        <p><strong>CMIPS Batch Processing - Complete Reference</strong></p>
        <p>50+ Batch Processes | Daily, Weekly, Monthly, Quarterly, Annual Schedules | DSD Sections 7, 20-28</p>
        <p>¬© 2025 - All Rights Reserved</p>
    </div>

    <script>
        function toggleAccordion(element) {
            const section = element.parentElement;
            const wasActive = section.classList.contains('active');
            
            if (!wasActive) {
                section.classList.add('active');
            } else {
                section.classList.remove('active');
            }
        }
    </script>
</body>
</html>
