services:
  frontend:
    build:
      context: .
      dockerfile: Dockerfile
      # Always use spring-app:8080 for Docker builds (default in Dockerfile)
      args:
        NEXT_PUBLIC_API_URL: ${NEXT_PUBLIC_API_URL:-http://localhost:8090}
    image: timesheet-frontend:latest
    container_name: timesheet-frontend
    restart: unless-stopped
    environment:
      # API Gateway URL - browser must use localhost:8090 (not Docker hostname)
      NEXT_PUBLIC_API_URL: http://localhost:8090
    ports:
      - "3000:3000"
    networks:
      - cmips-shared-network
    # Note: spring-app is in a different compose file, but accessible via cmips-shared-network

networks:
  cmips-shared-network:
    external: true
    name: cmips-shared-network

