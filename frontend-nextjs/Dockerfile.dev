FROM node:20-alpine

# Install dependencies
RUN apk add --no-cache libc6-compat

WORKDIR /app

# Copy package files first (for better caching)
COPY package*.json ./

# Install dependencies (will be overridden by volume mount, but needed for initial build)
# Use npm install instead of npm ci for flexibility (works without package-lock.json)
RUN npm install

# Expose port
EXPOSE 3000

# Set environment to development
ENV NODE_ENV=development

# Enable polling for file changes (needed for Docker volume mounts)
ENV WATCHPACK_POLLING=true
ENV CHOKIDAR_USEPOLLING=true

# Start development server with hot reloading
CMD ["npm", "run", "dev"]


