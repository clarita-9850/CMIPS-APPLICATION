<svg width="1600" height="1600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Gradients -->
    <linearGradient id="awsGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FF9900;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#FF6600;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="vpcGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#E8F4F8;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#D4E8F0;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="publicGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#E8F5E9;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#C8E6C9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="privateGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FFEBEE;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#FFCDD2;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="frontendGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#2196F3;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1976D2;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="backendGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4CAF50;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#388E3C;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="keycloakGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#F44336;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#D32F2F;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="dbGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9C27B0;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7B1FA2;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="kafkaGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FF9800;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#F57C00;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="zookeeperGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FFC107;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#FFA000;stop-opacity:1" />
    </linearGradient>
    
    <!-- Filters -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="3" dy="3" stdDeviation="4" flood-opacity="0.3"/>
    </filter>
    
    <!-- Arrow markers -->
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333" />
    </marker>
    <marker id="arrowheadBlue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#2196F3" />
    </marker>
    <marker id="arrowheadGreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#4CAF50" />
    </marker>
    <marker id="arrowheadRed" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#F44336" />
    </marker>
    <marker id="arrowheadPurple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#9C27B0" />
    </marker>
    <marker id="arrowheadOrange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#FF9800" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="800" y="30" font-family="Arial, sans-serif" font-size="28" font-weight="bold" text-anchor="middle" fill="#232F3E">
    CMIPS Application - Complete AWS Architecture
  </text>
  
  <!-- AWS Cloud Container -->
  <rect x="40" y="60" width="1520" height="1500" rx="15" fill="url(#awsGrad)" stroke="#FF9900" stroke-width="3" opacity="0.1"/>
  <text x="800" y="85" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#FF9900">
    AWS Cloud Infrastructure
  </text>
  
  <!-- VPC -->
  <rect x="80" y="120" width="1440" height="1400" rx="10" fill="url(#vpcGrad)" stroke="#146EB4" stroke-width="3" filter="url(#shadow)"/>
  <text x="800" y="150" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#146EB4">
    VPC (Virtual Private Cloud) - 10.0.0.0/16
  </text>
  
  <!-- Availability Zones -->
  <text x="800" y="175" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#146EB4">
    Multi-AZ Deployment (us-east-1a, us-east-1b, us-east-1c)
  </text>
  
  <!-- Public Subnet -->
  <rect x="120" y="200" width="600" height="1000" rx="8" fill="url(#publicGrad)" stroke="#4CAF50" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="420" y="225" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2E7D32">
    Public Subnet (10.0.1.0/24)
  </text>
  <text x="420" y="245" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#388E3C">
    Internet Gateway → Route Table → NAT Gateway
  </text>
  
  <!-- Internet Gateway -->
  <rect x="160" y="270" width="200" height="60" rx="5" fill="#81C784" stroke="#4CAF50" stroke-width="2" filter="url(#shadow)"/>
  <text x="260" y="295" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#1B5E20">Internet Gateway</text>
  <text x="260" y="315" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#2E7D32">Public Internet Access</text>
  
  <!-- Application Load Balancer -->
  <rect x="400" y="270" width="280" height="60" rx="5" fill="#66BB6A" stroke="#4CAF50" stroke-width="2" filter="url(#shadow)"/>
  <text x="540" y="295" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#1B5E20">Application Load Balancer (ALB)</text>
  <text x="540" y="315" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#2E7D32">HTTPS (443) → HTTP (3000, 8080)</text>
  
  <!-- Arrow from IGW to ALB -->
  <path d="M 360 300 L 400 300" stroke="#4CAF50" stroke-width="2" marker-end="url(#arrowheadGreen)"/>
  
  <!-- ECS Cluster - Frontend -->
  <rect x="160" y="360" width="240" height="180" rx="8" fill="url(#frontendGrad)" stroke="#1976D2" stroke-width="2" filter="url(#shadow)"/>
  <text x="280" y="385" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">ECS Fargate</text>
  <text x="280" y="405" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Frontend (Next.js)</text>
  <rect x="180" y="415" width="200" height="110" rx="5" fill="rgba(255,255,255,0.2)" stroke="white" stroke-width="1"/>
  <text x="280" y="435" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Port: 3000</text>
  <text x="280" y="450" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Container: Docker</text>
  <text x="280" y="465" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">• React Components</text>
  <text x="280" y="480" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">• API Client (Axios)</text>
  <text x="280" y="495" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">• AuthContext</text>
  <text x="280" y="510" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">• CountyThemeContext</text>
  <text x="280" y="525" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">• Role-based Routing</text>
  
  <!-- ECS Cluster - Keycloak -->
  <rect x="440" y="360" width="240" height="180" rx="8" fill="url(#keycloakGrad)" stroke="#D32F2F" stroke-width="2" filter="url(#shadow)"/>
  <text x="560" y="385" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">ECS Fargate</text>
  <text x="560" y="405" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Keycloak</text>
  <rect x="460" y="415" width="200" height="110" rx="5" fill="rgba(255,255,255,0.2)" stroke="white" stroke-width="1"/>
  <text x="560" y="435" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Port: 8080</text>
  <text x="560" y="450" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Container: Docker</text>
  <text x="560" y="465" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">• Authentication</text>
  <text x="560" y="480" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">• Authorization (RBAC)</text>
  <text x="560" y="495" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">• JWT Token Generation</text>
  <text x="560" y="510" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">• Groups (CTA/CTB/CTC)</text>
  <text x="560" y="525" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">• Roles Management</text>
  
  <!-- Arrows from ALB to ECS Services -->
  <path d="M 480 330 L 280 360" stroke="#4CAF50" stroke-width="2" marker-end="url(#arrowheadGreen)"/>
  <text x="380" y="340" font-family="Arial, sans-serif" font-size="9" fill="#2E7D32">HTTPS</text>
  <path d="M 600 330 L 560 360" stroke="#4CAF50" stroke-width="2" marker-end="url(#arrowheadGreen)"/>
  <text x="580" y="340" font-family="Arial, sans-serif" font-size="9" fill="#2E7D32">HTTPS</text>
  
  <!-- Security Group - Public -->
  <rect x="160" y="570" width="520" height="80" rx="5" fill="#C8E6C9" stroke="#4CAF50" stroke-width="2"/>
  <text x="420" y="595" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#2E7D32">Security Group (Public Subnet)</text>
  <text x="420" y="615" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#388E3C">Inbound: HTTPS (443) from 0.0.0.0/0, HTTP (80) → ALB</text>
  <text x="420" y="630" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#388E3C">Outbound: All traffic to Private Subnet, Internet</text>
  
  <!-- Private Subnet -->
  <rect x="800" y="200" width="600" height="1000" rx="8" fill="url(#privateGrad)" stroke="#F44336" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="1100" y="225" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#C62828">
    Private Subnet (10.0.2.0/24)
  </text>
  <text x="1100" y="245" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#D32F2F">
    NAT Gateway → Route Table → No Direct Internet Access
  </text>
  
  <!-- NAT Gateway -->
  <rect x="840" y="270" width="200" height="60" rx="5" fill="#EF5350" stroke="#F44336" stroke-width="2" filter="url(#shadow)"/>
  <text x="940" y="295" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#B71C1C">NAT Gateway</text>
  <text x="940" y="315" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#C62828">Outbound Internet Access</text>
  
  <!-- ECS Cluster - Backend -->
  <rect x="840" y="360" width="280" height="200" rx="8" fill="url(#backendGrad)" stroke="#388E3C" stroke-width="2" filter="url(#shadow)"/>
  <text x="980" y="385" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">ECS Fargate</text>
  <text x="980" y="405" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Backend (Spring Boot)</text>
  <rect x="860" y="415" width="240" height="130" rx="5" fill="rgba(255,255,255,0.2)" stroke="white" stroke-width="1"/>
  <text x="980" y="435" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Port: 8081</text>
  <text x="980" y="450" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Container: Docker</text>
  <text x="980" y="465" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">• REST Controllers</text>
  <text x="980" y="480" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">• Business Services</text>
  <text x="980" y="495" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">• JWT Validation</text>
  <text x="980" y="510" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">• Kafka Producers/Consumers</text>
  <text x="980" y="525" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">• Data Access Layer (JPA)</text>
  <text x="980" y="540" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">• Field Masking</text>
  
  <!-- RDS PostgreSQL Database (Cylindrical Shape) -->
  <!-- Cylinder base (ellipse) -->
  <ellipse cx="1200" cy="700" rx="80" ry="20" fill="url(#dbGrad)" stroke="#7B1FA2" stroke-width="2" opacity="0.6"/>
  <!-- Cylinder body -->
  <rect x="1120" y="620" width="160" height="100" rx="5" fill="url(#dbGrad)" stroke="#7B1FA2" stroke-width="2" filter="url(#shadow)"/>
  <!-- Cylinder top (ellipse) -->
  <ellipse cx="1200" cy="620" rx="80" ry="20" fill="url(#dbGrad)" stroke="#7B1FA2" stroke-width="2"/>
  
  <text x="1200" y="650" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">RDS PostgreSQL</text>
  <text x="1200" y="670" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">Multi-AZ Deployment</text>
  <text x="1200" y="690" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Port: 5432</text>
  <text x="1200" y="710" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Engine: PostgreSQL 15</text>
  
  <!-- Database Schemas -->
  <rect x="1080" y="740" width="240" height="120" rx="5" fill="rgba(156,39,176,0.2)" stroke="#9C27B0" stroke-width="2"/>
  <text x="1200" y="760" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#7B1FA2">Database Schemas</text>
  
  <!-- Keycloak Schema -->
  <rect x="1100" y="775" width="100" height="70" rx="3" fill="#E1BEE7" stroke="#9C27B0" stroke-width="1"/>
  <text x="1150" y="795" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#7B1FA2">Keycloak Schema</text>
  <text x="1150" y="810" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#6A1B9A">• realm</text>
  <text x="1150" y="825" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#6A1B9A">• user_entity</text>
  <text x="1150" y="840" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#6A1B9A">• keycloak_group</text>
  <text x="1150" y="855" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#6A1B9A">• client</text>
  
  <!-- Application Schema -->
  <rect x="1220" y="775" width="100" height="70" rx="3" fill="#F3E5F5" stroke="#9C27B0" stroke-width="1"/>
  <text x="1270" y="795" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#7B1FA2">Application Schema</text>
  <text x="1270" y="810" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#6A1B9A">• timesheets</text>
  <text x="1270" y="825" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#6A1B9A">• recipients</text>
  <text x="1270" y="840" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#6A1B9A">• providers</text>
  <text x="1270" y="855" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#6A1B9A">• work_queues</text>
  
  <!-- MSK Kafka Cluster -->
  <rect x="840" y="900" width="280" height="140" rx="8" fill="url(#kafkaGrad)" stroke="#F57C00" stroke-width="2" filter="url(#shadow)"/>
  <text x="980" y="925" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">Amazon MSK</text>
  <text x="980" y="945" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Kafka Cluster</text>
  <rect x="860" y="955" width="240" height="70" rx="5" fill="rgba(255,255,255,0.2)" stroke="white" stroke-width="1"/>
  <text x="980" y="975" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Port: 9092</text>
  <text x="980" y="990" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Topics:</text>
  <text x="980" y="1005" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">• cmips-case-events</text>
  <text x="980" y="1020" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">• cmips-timesheet-events</text>
  
  <!-- Zookeeper (MSK Managed) -->
  <rect x="840" y="1080" width="280" height="100" rx="8" fill="url(#zookeeperGrad)" stroke="#FFA000" stroke-width="2" filter="url(#shadow)"/>
  <text x="980" y="1105" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">Zookeeper</text>
  <text x="980" y="1125" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">(MSK Managed - 3 Nodes)</text>
  <rect x="860" y="1135" width="240" height="35" rx="5" fill="rgba(255,255,255,0.2)" stroke="white" stroke-width="1"/>
  <text x="980" y="1155" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Port: 2181</text>
  <text x="980" y="1170" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Coordination, Leader Election, Metadata</text>
  
  <!-- Security Group - Private -->
  <rect x="840" y="1210" width="280" height="80" rx="5" fill="#FFCDD2" stroke="#F44336" stroke-width="2"/>
  <text x="980" y="1235" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#C62828">Security Group (Private Subnet)</text>
  <text x="980" y="1255" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#D32F2F">Inbound: Port 8081, 5432, 9092, 2181 from Public Subnet only</text>
  <text x="980" y="1270" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#D32F2F">Outbound: All traffic via NAT Gateway</text>
  
  <!-- Separator line before bottom sections -->
  <line x1="80" y1="1280" x2="1520" y2="1280" stroke="#666" stroke-width="2" stroke-dasharray="5,5"/>
  
  <!-- Communication Lines -->
  
  <!-- Frontend to Keycloak (Authentication) -->
  <path d="M 400 450 L 440 450" stroke="#F44336" stroke-width="2" marker-end="url(#arrowheadRed)"/>
  <text x="420" y="445" font-family="Arial, sans-serif" font-size="9" fill="#C62828">Auth Request</text>
  
  <!-- Keycloak to Frontend (JWT Token) -->
  <path d="M 440 480 L 400 480" stroke="#F44336" stroke-width="2" marker-end="url(#arrowheadRed)"/>
  <text x="420" y="485" font-family="Arial, sans-serif" font-size="9" fill="#C62828">JWT Token</text>
  
  <!-- Keycloak to Backend -->
  <path d="M 680 450 L 840 460" stroke="#4CAF50" stroke-width="2" marker-end="url(#arrowheadGreen)"/>
  <text x="760" y="455" font-family="Arial, sans-serif" font-size="9" fill="#2E7D32">JWT Validation</text>
  
  <!-- Frontend to Backend -->
  <path d="M 400 500 L 840 500" stroke="#2196F3" stroke-width="2" marker-end="url(#arrowheadBlue)"/>
  <text x="620" y="495" font-family="Arial, sans-serif" font-size="9" fill="#1976D2">API Calls</text>
  
  <!-- Backend to PostgreSQL -->
  <path d="M 1120 560 L 1120 620" stroke="#9C27B0" stroke-width="2" marker-end="url(#arrowheadPurple)"/>
  <text x="1130" y="590" font-family="Arial, sans-serif" font-size="9" fill="#7B1FA2">JDBC</text>
  
  <!-- Keycloak to PostgreSQL -->
  <path d="M 680 500 L 1120 700" stroke="#9C27B0" stroke-width="2" marker-end="url(#arrowheadPurple)"/>
  <text x="900" y="600" font-family="Arial, sans-serif" font-size="9" fill="#7B1FA2">Keycloak Schema</text>
  
  <!-- Backend to Kafka -->
  <path d="M 980 560 L 980 900" stroke="#FF9800" stroke-width="2" marker-end="url(#arrowheadOrange)"/>
  <text x="990" y="730" font-family="Arial, sans-serif" font-size="9" fill="#F57C00">Produce/Consume</text>
  
  <!-- Kafka to Zookeeper -->
  <path d="M 980 1040 L 980 1080" stroke="#FFC107" stroke-width="2" marker-end="url(#arrowheadOrange)"/>
  <text x="990" y="1060" font-family="Arial, sans-serif" font-size="9" fill="#FFA000">Coordination</text>
  
  <!-- User Access Flow -->
  <rect x="40" y="280" width="80" height="60" rx="5" fill="#E3F2FD" stroke="#1976D2" stroke-width="2"/>
  <text x="80" y="300" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#1976D2">Users</text>
  <text x="80" y="315" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#0D47A1">Internet</text>
  <text x="80" y="330" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#0D47A1">HTTPS</text>
  
  <!-- User to ALB -->
  <path d="M 120 310 L 400 310" stroke="#1976D2" stroke-width="2" marker-end="url(#arrowheadBlue)"/>
  <text x="260" y="305" font-family="Arial, sans-serif" font-size="9" fill="#1976D2">User Requests</text>
  
  <!-- Additional AWS Services -->
  
  <!-- CloudWatch -->
  <rect x="120" y="700" width="200" height="80" rx="5" fill="#FFD700" stroke="#FFA500" stroke-width="2" filter="url(#shadow)"/>
  <text x="220" y="725" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#B8860B">CloudWatch</text>
  <text x="220" y="745" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#8B6914">Logs &amp; Metrics</text>
  <text x="220" y="760" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#8B6914">Alarms &amp; Dashboards</text>
  <text x="220" y="775" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#8B6914">Monitoring All Services</text>
  
  <!-- S3 -->
  <rect x="360" y="700" width="200" height="80" rx="5" fill="#FF6B6B" stroke="#FF4757" stroke-width="2" filter="url(#shadow)"/>
  <text x="460" y="725" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#C92A2A">Amazon S3</text>
  <text x="460" y="745" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#A61E4D">Static Assets</text>
  <text x="460" y="760" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#A61E4D">Reports &amp; Documents</text>
  <text x="460" y="775" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#A61E4D">Backups</text>
  
  <!-- Secrets Manager -->
  <rect x="120" y="820" width="200" height="80" rx="5" fill="#6C5CE7" stroke="#5F3DC4" stroke-width="2" filter="url(#shadow)"/>
  <text x="220" y="845" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#3B2E8A">Secrets Manager</text>
  <text x="220" y="865" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#2D1B5E">DB Credentials</text>
  <text x="220" y="880" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#2D1B5E">API Keys</text>
  <text x="220" y="895" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#2D1B5E">JWT Secrets</text>
  
  <!-- IAM -->
  <rect x="360" y="820" width="200" height="80" rx="5" fill="#00D2D3" stroke="#00A8CC" stroke-width="2" filter="url(#shadow)"/>
  <text x="460" y="845" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#0066CC">IAM Roles</text>
  <text x="460" y="865" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#0052A3">ECS Task Roles</text>
  <text x="460" y="880" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#0052A3">RDS Access</text>
  <text x="460" y="895" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#0052A3">S3 Access</text>
  
  <!-- Connections to AWS Services -->
  <path d="M 280 540 L 280 700" stroke="#FFD700" stroke-width="1.5" stroke-dasharray="3,3"/>
  <path d="M 280 540 L 360 700" stroke="#FFD700" stroke-width="1.5" stroke-dasharray="3,3"/>
  <path d="M 560 540 L 460 700" stroke="#FFD700" stroke-width="1.5" stroke-dasharray="3,3"/>
  <path d="M 980 560 L 220 820" stroke="#6C5CE7" stroke-width="1.5" stroke-dasharray="3,3"/>
  <path d="M 980 560 L 460 820" stroke="#00D2D3" stroke-width="1.5" stroke-dasharray="3,3"/>
  
  <!-- Route 53 -->
  <rect x="120" y="940" width="200" height="60" rx="5" fill="#4ECDC4" stroke="#26A69A" stroke-width="2" filter="url(#shadow)"/>
  <text x="220" y="965" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#00695C">Route 53</text>
  <text x="220" y="985" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#004D40">DNS Management</text>
  
  <!-- WAF -->
  <rect x="360" y="940" width="200" height="60" rx="5" fill="#FF7675" stroke="#E84393" stroke-width="2" filter="url(#shadow)"/>
  <text x="460" y="965" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#C92A2A">AWS WAF</text>
  <text x="460" y="985" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#A61E4D">Web Application Firewall</text>
  
  <!-- Auto Scaling -->
  <rect x="120" y="1040" width="440" height="60" rx="5" fill="#A29BFE" stroke="#6C5CE7" stroke-width="2" filter="url(#shadow)"/>
  <text x="340" y="1065" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#3B2E8A">Auto Scaling Groups</text>
  <text x="340" y="1085" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#2D1B5E">ECS Service Auto Scaling (CPU/Memory based) | RDS Read Replicas | MSK Broker Scaling</text>
  
  <!-- Legend -->
  <rect x="120" y="1300" width="440" height="180" rx="5" fill="#F5F5F5" stroke="#333" stroke-width="2"/>
  <text x="340" y="1325" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">Legend</text>
  
  <rect x="140" y="1340" width="15" height="15" fill="url(#frontendGrad)"/>
  <text x="165" y="1352" font-family="Arial, sans-serif" font-size="10" fill="#333">Frontend Services</text>
  
  <rect x="240" y="1340" width="15" height="15" fill="url(#backendGrad)"/>
  <text x="265" y="1352" font-family="Arial, sans-serif" font-size="10" fill="#333">Backend Services</text>
  
  <rect x="340" y="1340" width="15" height="15" fill="url(#keycloakGrad)"/>
  <text x="365" y="1352" font-family="Arial, sans-serif" font-size="10" fill="#333">Authentication</text>
  
  <ellipse cx="147" cy="1370" rx="8" ry="4" fill="url(#dbGrad)"/>
  <text x="165" y="1373" font-family="Arial, sans-serif" font-size="10" fill="#333">Database</text>
  
  <rect x="240" y="1365" width="15" height="15" fill="url(#kafkaGrad)"/>
  <text x="265" y="1377" font-family="Arial, sans-serif" font-size="10" fill="#333">Message Broker</text>
  
  <rect x="340" y="1365" width="15" height="15" fill="url(#zookeeperGrad)"/>
  <text x="365" y="1377" font-family="Arial, sans-serif" font-size="10" fill="#333">Coordination</text>
  
  <path d="M 140 1395 L 155 1395" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="165" y="1398" font-family="Arial, sans-serif" font-size="10" fill="#333">Data Flow</text>
  
  <path d="M 240 1395 L 255 1395" stroke="#333" stroke-width="1.5" stroke-dasharray="3,3"/>
  <text x="265" y="1398" font-family="Arial, sans-serif" font-size="10" fill="#333">Monitoring/Management</text>
  
  <rect x="340" y="1390" width="15" height="15" fill="url(#publicGrad)" stroke="#4CAF50" stroke-width="1"/>
  <text x="365" y="1402" font-family="Arial, sans-serif" font-size="10" fill="#333">Public Subnet</text>
  
  <rect x="420" y="1390" width="15" height="15" fill="url(#privateGrad)" stroke="#F44336" stroke-width="1"/>
  <text x="445" y="1402" font-family="Arial, sans-serif" font-size="10" fill="#333">Private Subnet</text>
  
  <rect x="140" y="1415" width="15" height="15" fill="#E3F2FD" stroke="#1976D2" stroke-width="1"/>
  <text x="165" y="1427" font-family="Arial, sans-serif" font-size="10" fill="#333">User/Internet</text>
  
  <rect x="240" y="1415" width="15" height="15" fill="#66BB6A" stroke="#4CAF50" stroke-width="1"/>
  <text x="265" y="1427" font-family="Arial, sans-serif" font-size="10" fill="#333">Load Balancer</text>
  
  <!-- Architecture Highlights -->
  <rect x="600" y="1300" width="480" height="180" rx="5" fill="#E3F2FD" stroke="#1976D2" stroke-width="2"/>
  <text x="840" y="1325" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#1976D2">Architecture Highlights</text>
  
  <text x="620" y="1345" font-family="Arial, sans-serif" font-size="10" fill="#0D47A1">• Multi-AZ deployment for high availability</text>
  <text x="620" y="1360" font-family="Arial, sans-serif" font-size="10" fill="#0D47A1">• Public subnet: Frontend, Keycloak, ALB (Internet-facing)</text>
  <text x="620" y="1375" font-family="Arial, sans-serif" font-size="10" fill="#0D47A1">• Private subnet: Backend, Database, Kafka (Internal only)</text>
  <text x="620" y="1390" font-family="Arial, sans-serif" font-size="10" fill="#0D47A1">• PostgreSQL: Dual schema (Keycloak + Application)</text>
  <text x="620" y="1405" font-family="Arial, sans-serif" font-size="10" fill="#0D47A1">• MSK: Managed Kafka with Zookeeper coordination</text>
  <text x="620" y="1420" font-family="Arial, sans-serif" font-size="10" fill="#0D47A1">• Security: Security Groups, WAF, IAM roles, Secrets Manager</text>
  <text x="620" y="1435" font-family="Arial, sans-serif" font-size="10" fill="#0D47A1">• Monitoring: CloudWatch logs, metrics, alarms</text>
  <text x="620" y="1450" font-family="Arial, sans-serif" font-size="10" fill="#0D47A1">• User Flow: Users → ALB → Frontend → Keycloak (Auth) → Backend</text>
  <text x="620" y="1465" font-family="Arial, sans-serif" font-size="10" fill="#0D47A1">• Frontend communicates with Keycloak for authentication</text>
  
</svg>

