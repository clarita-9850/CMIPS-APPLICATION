<?xml version="1.0" encoding="UTF-8"?>
<svg width="1400" height="1000" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: bold 26px sans-serif; fill: #2c3e50; }
      .subtitle { font: 18px sans-serif; fill: #34495e; }
      .phase-title { font: bold 16px sans-serif; fill: #ffffff; }
      .step-title { font: bold 14px sans-serif; fill: #2c3e50; }
      .text { font: 13px sans-serif; fill: #2c3e50; }
      .text-white { font: 13px sans-serif; fill: #ffffff; }
      .text-small { font: 11px sans-serif; fill: #7f8c8d; }
      .step-num { font: bold 18px sans-serif; fill: #ffffff; }
    </style>
    <linearGradient id="phase1-grad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e74c3c;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c0392b;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="phase2-grad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f39c12;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#e67e22;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="phase3-grad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2980b9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="phase4-grad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#27ae60;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#229954;stop-opacity:1" />
    </linearGradient>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#34495e" />
    </marker>
    <marker id="arrow-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#27ae60" />
    </marker>
    <marker id="arrow-red" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#e74c3c" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="700" y="40" text-anchor="middle" class="title">ServiceNow + Keycloak Configuration Integration</text>
  <text x="700" y="70" text-anchor="middle" class="subtitle">Governed Configuration Change Management Workflow</text>
  
  <!-- Phase 1: Change Request -->
  <rect x="50" y="100" width="1300" height="180" rx="10" fill="url(#phase1-grad)" />
  <text x="700" y="130" text-anchor="middle" class="phase-title">Phase 1: Change Request Initiation</text>
  
  <!-- User Creates Request -->
  <circle cx="150" cy="180" r="20" fill="#ffffff" />
  <text x="150" y="186" text-anchor="middle" class="step-num">1</text>
  
  <rect x="190" y="150" width="300" height="80" rx="8" fill="#ffffff" stroke="#e74c3c" stroke-width="2" />
  <text x="340" y="175" text-anchor="middle" class="step-title">User Creates Change Request</text>
  <text x="200" y="195" class="text">Add status field to provider_read_fields</text>
  <text x="200" y="210" class="text-small">Business Justification: Providers need to see approval status</text>
  <text x="200" y="225" class="text-small">Risk Level: Low | Priority: Medium</text>
  
  <!-- ServiceNow Validation -->
  <circle cx="650" cy="180" r="20" fill="#ffffff" />
  <text x="650" y="186" text-anchor="middle" class="step-num">2</text>
  
  <rect x="690" y="150" width="300" height="80" rx="8" fill="#ffffff" stroke="#e74c3c" stroke-width="2" />
  <text x="840" y="175" text-anchor="middle" class="step-title">ServiceNow Validation</text>
  <text x="700" y="195" class="text">User permission check</text>
  <text x="700" y="210" class="text">Business justification review</text>
  <text x="700" y="225" class="text">Impact assessment</text>
  
  <!-- Arrow -->
  <path d="M 490 190 L 630 190" stroke="#34495e" stroke-width="3" marker-end="url(#arrow)" />
  
  <!-- Phase 2: Approval Workflow -->
  <rect x="50" y="300" width="1300" height="220" rx="10" fill="url(#phase2-grad)" />
  <text x="700" y="330" text-anchor="middle" class="phase-title">Phase 2: Multi-Level Approval Workflow</text>
  
  <!-- Technical Review -->
  <circle cx="150" cy="380" r="20" fill="#ffffff" />
  <text x="150" y="386" text-anchor="middle" class="step-num">3</text>
  
  <rect x="190" y="350" width="280" height="100" rx="8" fill="#ffffff" stroke="#f39c12" stroke-width="2" />
  <text x="330" y="375" text-anchor="middle" class="step-title">Technical Review</text>
  <text x="200" y="395" class="text">Security Team Lead</text>
  <text x="200" y="410" class="text-small">Review technical impact</text>
  <text x="200" y="425" class="text-small">Validate security implications</text>
  <text x="200" y="440" class="text-small">Decision: APPROVE</text>
  
  <!-- Business Approval -->
  <circle cx="550" cy="380" r="20" fill="#ffffff" />
  <text x="550" y="386" text-anchor="middle" class="step-num">4</text>
  
  <rect x="590" y="350" width="280" height="100" rx="8" fill="#ffffff" stroke="#f39c12" stroke-width="2" />
  <text x="730" y="375" text-anchor="middle" class="step-title">Business Approval</text>
  <text x="600" y="395" class="text">Product Owner</text>
  <text x="600" y="410" class="text-small">Review business justification</text>
  <text x="600" y="425" class="text-small">Confirm user experience impact</text>
  <text x="600" y="440" class="text-small">Decision: APPROVE</text>
  
  <!-- CAB Approval -->
  <circle cx="950" cy="380" r="20" fill="#ffffff" />
  <text x="950" y="386" text-anchor="middle" class="step-num">5</text>
  
  <rect x="990" y="350" width="280" height="100" rx="8" fill="#ffffff" stroke="#f39c12" stroke-width="2" />
  <text x="1130" y="375" text-anchor="middle" class="step-title">CAB Approval</text>
  <text x="1000" y="395" class="text">Change Advisory Board</text>
  <text x="1000" y="410" class="text-small">Review overall impact</text>
  <text x="1000" y="425" class="text-small">Schedule implementation</text>
  <text x="1000" y="440" class="text-small">Decision: APPROVE</text>
  
  <!-- Arrows -->
  <path d="M 470 400 L 530 400" stroke="#34495e" stroke-width="3" marker-end="url(#arrow)" />
  <path d="M 870 400 L 930 400" stroke="#34495e" stroke-width="3" marker-end="url(#arrow)" />
  
  <!-- Phase 3: Implementation -->
  <rect x="50" y="540" width="1300" height="220" rx="10" fill="url(#phase3-grad)" />
  <text x="700" y="570" text-anchor="middle" class="phase-title">Phase 3: Automated Implementation</text>
  
  <!-- Pre-Implementation Check -->
  <circle cx="150" cy="620" r="20" fill="#ffffff" />
  <text x="150" y="626" text-anchor="middle" class="step-num">6</text>
  
  <rect x="190" y="590" width="280" height="100" rx="8" fill="#ffffff" stroke="#3498db" stroke-width="2" />
  <text x="330" y="615" text-anchor="middle" class="step-title">Pre-Implementation Check</text>
  <text x="200" y="635" class="text">ServiceNow to Keycloak</text>
  <text x="200" y="650" class="text-small">Verify connectivity</text>
  <text x="200" y="665" class="text-small">Test configuration syntax</text>
  <text x="200" y="680" class="text-small">Check for conflicts</text>
  
  <!-- Configuration Change -->
  <circle cx="550" cy="620" r="20" fill="#ffffff" />
  <text x="550" y="626" text-anchor="middle" class="step-num">7</text>
  
  <rect x="590" y="590" width="280" height="100" rx="8" fill="#ffffff" stroke="#3498db" stroke-width="2" />
  <text x="730" y="615" text-anchor="middle" class="step-title">Apply Configuration</text>
  <text x="600" y="635" class="text">ServiceNow to Keycloak API</text>
  <text x="600" y="650" class="text-small">Update resource attributes</text>
  <text x="600" y="665" class="text-small">Backup current config</text>
  <text x="600" y="680" class="text-small">Apply new configuration</text>
  
  <!-- Verification -->
  <circle cx="950" cy="620" r="20" fill="#ffffff" />
  <text x="950" y="626" text-anchor="middle" class="step-num">8</text>
  
  <rect x="990" y="590" width="280" height="100" rx="8" fill="#ffffff" stroke="#3498db" stroke-width="2" />
  <text x="1130" y="615" text-anchor="middle" class="step-title">Change Verification</text>
  <text x="1000" y="635" class="text">ServiceNow to Keycloak</text>
  <text x="1000" y="650" class="text-small">Query current configuration</text>
  <text x="1000" y="665" class="text-small">Compare with expected</text>
  <text x="1000" y="680" class="text-small">Validate successful change</text>
  
  <!-- Arrows -->
  <path d="M 470 640 L 530 640" stroke="#34495e" stroke-width="3" marker-end="url(#arrow)" />
  <path d="M 870 640 L 930 640" stroke="#34495e" stroke-width="3" marker-end="url(#arrow)" />
  
  <!-- Phase 4: Post-Implementation -->
  <rect x="50" y="780" width="1300" height="180" rx="10" fill="url(#phase4-grad)" />
  <text x="700" y="810" text-anchor="middle" class="phase-title">Phase 4: Post-Implementation and Monitoring</text>
  
  <!-- User Notification -->
  <circle cx="150" cy="860" r="20" fill="#ffffff" />
  <text x="150" y="866" text-anchor="middle" class="step-num">9</text>
  
  <rect x="190" y="830" width="280" height="100" rx="8" fill="#ffffff" stroke="#27ae60" stroke-width="2" />
  <text x="330" y="855" text-anchor="middle" class="step-title">User Notification</text>
  <text x="200" y="875" class="text">ServiceNow to Users</text>
  <text x="200" y="890" class="text-small">Send change notification</text>
  <text x="200" y="905" class="text-small">Update documentation</text>
  <text x="200" y="920" class="text-small">Schedule user testing</text>
  
  <!-- Monitoring -->
  <circle cx="550" cy="860" r="20" fill="#ffffff" />
  <text x="550" y="866" text-anchor="middle" class="step-num">10</text>
  
  <rect x="590" y="830" width="280" height="100" rx="8" fill="#ffffff" stroke="#27ae60" stroke-width="2" />
  <text x="730" y="855" text-anchor="middle" class="step-title">Monitoring and Audit</text>
  <text x="600" y="875" class="text">Continuous Monitoring</text>
  <text x="600" y="890" class="text-small">Track user adoption</text>
  <text x="600" y="905" class="text-small">Monitor for issues</text>
  <text x="600" y="920" class="text-small">Collect feedback</text>
  
  <!-- Close Ticket -->
  <circle cx="950" cy="860" r="20" fill="#ffffff" />
  <text x="950" y="866" text-anchor="middle" class="step-num">11</text>
  
  <rect x="990" y="830" width="280" height="100" rx="8" fill="#ffffff" stroke="#27ae60" stroke-width="2" />
  <text x="1130" y="855" text-anchor="middle" class="step-title">Close Change Request</text>
  <text x="1000" y="875" class="text">ServiceNow</text>
  <text x="1000" y="890" class="text-small">Update ticket status</text>
  <text x="1000" y="905" class="text-small">Generate audit report</text>
  <text x="1000" y="920" class="text-small">Archive change record</text>
  
  <!-- Arrows -->
  <path d="M 470 880 L 530 880" stroke="#34495e" stroke-width="3" marker-end="url(#arrow)" />
  <path d="M 870 880 L 930 880" stroke="#34495e" stroke-width="3" marker-end="url(#arrow)" />
  
  <!-- Integration Details -->
  <rect x="50" y="980" width="1300" height="60" rx="8" fill="#ecf0f1" stroke="#95a5a6" stroke-width="2" />
  <text x="700" y="1005" text-anchor="middle" class="text" font-weight="bold">Integration Components</text>
  
  <text x="100" y="1025" class="text-small">ServiceNow: Change Management and Approval Workflow</text>
  <text x="450" y="1025" class="text-small">Keycloak: Configuration Store and Identity Provider</text>
  <text x="800" y="1025" class="text-small">REST API: Automated Configuration Updates</text>
  <text x="1100" y="1025" class="text-small">Audit: Complete Change Tracking</text>
  
  <!-- Benefits Box -->
  <rect x="1200" y="120" width="150" height="120" rx="8" fill="#d5f4e6" stroke="#27ae60" stroke-width="2" />
  <text x="1275" y="140" text-anchor="middle" class="text" font-weight="bold">Key Benefits</text>
  <text x="1210" y="160" class="text-small">Governed Changes</text>
  <text x="1210" y="175" class="text-small">Audit Compliance</text>
  <text x="1210" y="190" class="text-small">Risk Management</text>
  <text x="1210" y="205" class="text-small">Rollback Capability</text>
  <text x="1210" y="220" class="text-small">Automation</text>
  <text x="1210" y="235" class="text-small">Documentation</text>
  
  <!-- Timeline Box -->
  <rect x="1200" y="400" width="150" height="100" rx="8" fill="#fff3cd" stroke="#f39c12" stroke-width="2" />
  <text x="1275" y="420" text-anchor="middle" class="text" font-weight="bold">Timeline</text>
  <text x="1210" y="440" class="text-small">Phase 1: 1 day</text>
  <text x="1210" y="455" class="text-small">Phase 2: 3-5 days</text>
  <text x="1210" y="470" class="text-small">Phase 3: 30 minutes</text>
  <text x="1210" y="485" class="text-small">Phase 4: Ongoing</text>
  
  <!-- Risk Levels -->
  <rect x="1200" y="650" width="150" height="100" rx="8" fill="#f8d7da" stroke="#e74c3c" stroke-width="2" />
  <text x="1275" y="670" text-anchor="middle" class="text" font-weight="bold">Risk Management</text>
  <text x="1210" y="690" class="text-small">High: CAB Required</text>
  <text x="1210" y="705" class="text-small">Medium: 2 Approvals</text>
  <text x="1210" y="720" class="text-small">Low: 1 Approval</text>
  <text x="1210" y="735" class="text-small">Info: Auto-approve</text>
</svg>